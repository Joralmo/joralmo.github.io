<!DOCTYPE html><html lang="es"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="gatsby-theme" content="@lekoarts/gatsby-theme-minimal-blog"/><meta data-react-helmet="true" name="twitter:creator" content="@JoralmoPro"/><meta data-react-helmet="true" name="twitter:image:alt" content="Hola mundo, bienvenidos a este tutorial donde voy a intentar explicar como aplicar pruebas de carga con k6 sobre una pequeña api que…"/><meta data-react-helmet="true" name="twitter:image" content="https://blog.joralmo.pro/banner.jpg"/><meta data-react-helmet="true" name="twitter:description" content="Hola mundo, bienvenidos a este tutorial donde voy a intentar explicar como aplicar pruebas de carga con k6 sobre una pequeña api que…"/><meta data-react-helmet="true" name="twitter:url" content="https://blog.joralmo.pro/load-test-with-grafana-k6"/><meta data-react-helmet="true" name="twitter:title" content="Pruebas de carga con k6"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" property="og:image:alt" content="Hola mundo, bienvenidos a este tutorial donde voy a intentar explicar como aplicar pruebas de carga con k6 sobre una pequeña api que…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:image" content="https://blog.joralmo.pro/banner.jpg"/><meta data-react-helmet="true" property="og:description" content="Hola mundo, bienvenidos a este tutorial donde voy a intentar explicar como aplicar pruebas de carga con k6 sobre una pequeña api que…"/><meta data-react-helmet="true" property="og:url" content="https://blog.joralmo.pro/load-test-with-grafana-k6"/><meta data-react-helmet="true" property="og:title" content="Pruebas de carga con k6"/><meta data-react-helmet="true" name="image" content="https://blog.joralmo.pro/banner.jpg"/><meta data-react-helmet="true" name="description" content="Hola mundo, bienvenidos a este tutorial donde voy a intentar explicar como aplicar pruebas de carga con k6 sobre una pequeña api que…"/><meta name="generator" content="Gatsby 4.16.0"/><title data-react-helmet="true">Pruebas de carga con k6 | JoralmoPro</title><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&amp;display=swap"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="192x192" href="/android-chrome-192x192.png"/><link rel="apple-touch-icon" sizes="512x512" href="/android-chrome-512x512.png"/><link rel="alternate" type="application/rss+xml" title="JoralmoPro" href="/rss.xml"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.documentElement.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion="css-global 1yc3m30">html{--theme-ui-colors-transparent:transparent;--theme-ui-colors-black:#000;--theme-ui-colors-white:#fff;--theme-ui-colors-gray-1:#f7fafc;--theme-ui-colors-gray-2:#edf2f7;--theme-ui-colors-gray-3:#e2e8f0;--theme-ui-colors-gray-4:#cbd5e0;--theme-ui-colors-gray-5:#a0aec0;--theme-ui-colors-gray-6:#718096;--theme-ui-colors-gray-7:#4a5568;--theme-ui-colors-gray-8:#2d3748;--theme-ui-colors-gray-9:#1a202c;--theme-ui-colors-red-1:#fff5f5;--theme-ui-colors-red-2:#fed7d7;--theme-ui-colors-red-3:#feb2b2;--theme-ui-colors-red-4:#fc8181;--theme-ui-colors-red-5:#f56565;--theme-ui-colors-red-6:#e53e3e;--theme-ui-colors-red-7:#c53030;--theme-ui-colors-red-8:#9b2c2c;--theme-ui-colors-red-9:#742a2a;--theme-ui-colors-orange-1:#fffaf0;--theme-ui-colors-orange-2:#feebc8;--theme-ui-colors-orange-3:#fbd38d;--theme-ui-colors-orange-4:#f6ad55;--theme-ui-colors-orange-5:#ed8936;--theme-ui-colors-orange-6:#dd6b20;--theme-ui-colors-orange-7:#c05621;--theme-ui-colors-orange-8:#9c4221;--theme-ui-colors-orange-9:#7b341e;--theme-ui-colors-yellow-1:#fffff0;--theme-ui-colors-yellow-2:#fefcbf;--theme-ui-colors-yellow-3:#faf089;--theme-ui-colors-yellow-4:#f6e05e;--theme-ui-colors-yellow-5:#ecc94b;--theme-ui-colors-yellow-6:#d69e2e;--theme-ui-colors-yellow-7:#b7791f;--theme-ui-colors-yellow-8:#975a16;--theme-ui-colors-yellow-9:#744210;--theme-ui-colors-green-1:#f0fff4;--theme-ui-colors-green-2:#c6f6d5;--theme-ui-colors-green-3:#9ae6b4;--theme-ui-colors-green-4:#68d391;--theme-ui-colors-green-5:#48bb78;--theme-ui-colors-green-6:#38a169;--theme-ui-colors-green-7:#2f855a;--theme-ui-colors-green-8:#276749;--theme-ui-colors-green-9:#22543d;--theme-ui-colors-teal-1:#e6fffa;--theme-ui-colors-teal-2:#b2f5ea;--theme-ui-colors-teal-3:#81e6d9;--theme-ui-colors-teal-4:#4fd1c5;--theme-ui-colors-teal-5:#38b2ac;--theme-ui-colors-teal-6:#319795;--theme-ui-colors-teal-7:#2c7a7b;--theme-ui-colors-teal-8:#285e61;--theme-ui-colors-teal-9:#234e52;--theme-ui-colors-blue-1:#ebf8ff;--theme-ui-colors-blue-2:#bee3f8;--theme-ui-colors-blue-3:#90cdf4;--theme-ui-colors-blue-4:#63b3ed;--theme-ui-colors-blue-5:#4299e1;--theme-ui-colors-blue-6:#3182ce;--theme-ui-colors-blue-7:#2b6cb0;--theme-ui-colors-blue-8:#2c5282;--theme-ui-colors-blue-9:#2a4365;--theme-ui-colors-indigo-1:#ebf4ff;--theme-ui-colors-indigo-2:#c3dafe;--theme-ui-colors-indigo-3:#a3bffa;--theme-ui-colors-indigo-4:#7f9cf5;--theme-ui-colors-indigo-5:#667eea;--theme-ui-colors-indigo-6:#5a67d8;--theme-ui-colors-indigo-7:#4c51bf;--theme-ui-colors-indigo-8:#434190;--theme-ui-colors-indigo-9:#3c366b;--theme-ui-colors-purple-1:#faf5ff;--theme-ui-colors-purple-2:#e9d8fd;--theme-ui-colors-purple-3:#d6bcfa;--theme-ui-colors-purple-4:#b794f4;--theme-ui-colors-purple-5:#9f7aea;--theme-ui-colors-purple-6:#805ad5;--theme-ui-colors-purple-7:#6b46c1;--theme-ui-colors-purple-8:#553c9a;--theme-ui-colors-purple-9:#44337a;--theme-ui-colors-pink-1:#fff5f7;--theme-ui-colors-pink-2:#fed7e2;--theme-ui-colors-pink-3:#fbb6ce;--theme-ui-colors-pink-4:#f687b3;--theme-ui-colors-pink-5:#ed64a6;--theme-ui-colors-pink-6:#d53f8c;--theme-ui-colors-pink-7:#b83280;--theme-ui-colors-pink-8:#97266d;--theme-ui-colors-pink-9:#702459;--theme-ui-colors-grayDark:#2d3748;--theme-ui-colors-text:#2d3748;--theme-ui-colors-background:#fff;--theme-ui-colors-primary:#6b46c1;--theme-ui-colors-primaryHover:#2c5282;--theme-ui-colors-secondary:#5f6c80;--theme-ui-colors-muted:#e2e8f0;--theme-ui-colors-success:#9ae6b4;--theme-ui-colors-info:#63b3ed;--theme-ui-colors-warning:#faf089;--theme-ui-colors-danger:#feb2b2;--theme-ui-colors-light:#f7fafc;--theme-ui-colors-dark:#2d3748;--theme-ui-colors-textMuted:#718096;--theme-ui-colors-toggleIcon:#2d3748;--theme-ui-colors-heading:#000;--theme-ui-colors-divide:#cbd5e0;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}html.theme-ui-__default,.theme-ui-__default html{--theme-ui-colors-transparent:transparent;--theme-ui-colors-black:#000;--theme-ui-colors-white:#fff;--theme-ui-colors-gray-1:#f7fafc;--theme-ui-colors-gray-2:#edf2f7;--theme-ui-colors-gray-3:#e2e8f0;--theme-ui-colors-gray-4:#cbd5e0;--theme-ui-colors-gray-5:#a0aec0;--theme-ui-colors-gray-6:#718096;--theme-ui-colors-gray-7:#4a5568;--theme-ui-colors-gray-8:#2d3748;--theme-ui-colors-gray-9:#1a202c;--theme-ui-colors-red-1:#fff5f5;--theme-ui-colors-red-2:#fed7d7;--theme-ui-colors-red-3:#feb2b2;--theme-ui-colors-red-4:#fc8181;--theme-ui-colors-red-5:#f56565;--theme-ui-colors-red-6:#e53e3e;--theme-ui-colors-red-7:#c53030;--theme-ui-colors-red-8:#9b2c2c;--theme-ui-colors-red-9:#742a2a;--theme-ui-colors-orange-1:#fffaf0;--theme-ui-colors-orange-2:#feebc8;--theme-ui-colors-orange-3:#fbd38d;--theme-ui-colors-orange-4:#f6ad55;--theme-ui-colors-orange-5:#ed8936;--theme-ui-colors-orange-6:#dd6b20;--theme-ui-colors-orange-7:#c05621;--theme-ui-colors-orange-8:#9c4221;--theme-ui-colors-orange-9:#7b341e;--theme-ui-colors-yellow-1:#fffff0;--theme-ui-colors-yellow-2:#fefcbf;--theme-ui-colors-yellow-3:#faf089;--theme-ui-colors-yellow-4:#f6e05e;--theme-ui-colors-yellow-5:#ecc94b;--theme-ui-colors-yellow-6:#d69e2e;--theme-ui-colors-yellow-7:#b7791f;--theme-ui-colors-yellow-8:#975a16;--theme-ui-colors-yellow-9:#744210;--theme-ui-colors-green-1:#f0fff4;--theme-ui-colors-green-2:#c6f6d5;--theme-ui-colors-green-3:#9ae6b4;--theme-ui-colors-green-4:#68d391;--theme-ui-colors-green-5:#48bb78;--theme-ui-colors-green-6:#38a169;--theme-ui-colors-green-7:#2f855a;--theme-ui-colors-green-8:#276749;--theme-ui-colors-green-9:#22543d;--theme-ui-colors-teal-1:#e6fffa;--theme-ui-colors-teal-2:#b2f5ea;--theme-ui-colors-teal-3:#81e6d9;--theme-ui-colors-teal-4:#4fd1c5;--theme-ui-colors-teal-5:#38b2ac;--theme-ui-colors-teal-6:#319795;--theme-ui-colors-teal-7:#2c7a7b;--theme-ui-colors-teal-8:#285e61;--theme-ui-colors-teal-9:#234e52;--theme-ui-colors-blue-1:#ebf8ff;--theme-ui-colors-blue-2:#bee3f8;--theme-ui-colors-blue-3:#90cdf4;--theme-ui-colors-blue-4:#63b3ed;--theme-ui-colors-blue-5:#4299e1;--theme-ui-colors-blue-6:#3182ce;--theme-ui-colors-blue-7:#2b6cb0;--theme-ui-colors-blue-8:#2c5282;--theme-ui-colors-blue-9:#2a4365;--theme-ui-colors-indigo-1:#ebf4ff;--theme-ui-colors-indigo-2:#c3dafe;--theme-ui-colors-indigo-3:#a3bffa;--theme-ui-colors-indigo-4:#7f9cf5;--theme-ui-colors-indigo-5:#667eea;--theme-ui-colors-indigo-6:#5a67d8;--theme-ui-colors-indigo-7:#4c51bf;--theme-ui-colors-indigo-8:#434190;--theme-ui-colors-indigo-9:#3c366b;--theme-ui-colors-purple-1:#faf5ff;--theme-ui-colors-purple-2:#e9d8fd;--theme-ui-colors-purple-3:#d6bcfa;--theme-ui-colors-purple-4:#b794f4;--theme-ui-colors-purple-5:#9f7aea;--theme-ui-colors-purple-6:#805ad5;--theme-ui-colors-purple-7:#6b46c1;--theme-ui-colors-purple-8:#553c9a;--theme-ui-colors-purple-9:#44337a;--theme-ui-colors-pink-1:#fff5f7;--theme-ui-colors-pink-2:#fed7e2;--theme-ui-colors-pink-3:#fbb6ce;--theme-ui-colors-pink-4:#f687b3;--theme-ui-colors-pink-5:#ed64a6;--theme-ui-colors-pink-6:#d53f8c;--theme-ui-colors-pink-7:#b83280;--theme-ui-colors-pink-8:#97266d;--theme-ui-colors-pink-9:#702459;--theme-ui-colors-grayDark:#2d3748;--theme-ui-colors-text:#2d3748;--theme-ui-colors-background:#fff;--theme-ui-colors-primary:#6b46c1;--theme-ui-colors-primaryHover:#2c5282;--theme-ui-colors-secondary:#5f6c80;--theme-ui-colors-muted:#e2e8f0;--theme-ui-colors-success:#9ae6b4;--theme-ui-colors-info:#63b3ed;--theme-ui-colors-warning:#faf089;--theme-ui-colors-danger:#feb2b2;--theme-ui-colors-light:#f7fafc;--theme-ui-colors-dark:#2d3748;--theme-ui-colors-textMuted:#718096;--theme-ui-colors-toggleIcon:#2d3748;--theme-ui-colors-heading:#000;--theme-ui-colors-divide:#cbd5e0;}html.theme-ui-dark,.theme-ui-dark html{--theme-ui-colors-text:#cbd5e0;--theme-ui-colors-primary:#9f7aea;--theme-ui-colors-secondary:#7f8ea3;--theme-ui-colors-toggleIcon:#cbd5e0;--theme-ui-colors-background:#1A202C;--theme-ui-colors-heading:#fff;--theme-ui-colors-divide:#2d3748;--theme-ui-colors-muted:#2d3748;}</style><style data-emotion="css-global 1j0yc2g">*{box-sizing:border-box;}html{font-family:"IBM Plex Sans",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.625;font-weight:400;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);margin:0;padding:0;box-sizing:border-box;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}body{margin:0;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css-global h7esfd">*{box-sizing:inherit;}html{-webkit-text-size-adjust:100%;}img{border-style:none;}pre{font-family:monospace;font-size:1em;}[hidden]{display:none;}::selection{background-color:var(--theme-ui-colors-text);color:var(--theme-ui-colors-background);}a{-webkit-transition:all 0.3s ease-in-out;transition:all 0.3s ease-in-out;color:text;}</style><style data-emotion="css 1gq7j3t">.css-1gq7j3t{border:0;clip:react(0 0 0 0);height:1px;width:1px;margin:-1px;padding:0;overflow:hidden;position:absolute;}.css-1gq7j3t:focus{padding:1rem;position:fixed;top:15px;left:15px;background-color:var(--theme-ui-colors-heading);color:var(--theme-ui-colors-background);z-index:1;width:auto;height:auto;clip:auto;-webkit-text-decoration:none;text-decoration:none;}</style><a href="#skip-nav" data-skip-link="true" class="css-1gq7j3t">Skip to content</a><style data-emotion="css 1jrqzhj">.css-1jrqzhj{box-sizing:border-box;margin:0;min-width:0;width:100%;max-width:container;margin-left:auto;margin-right:auto;padding:1rem;max-width:1024px;}@media screen and (min-width: 640px){.css-1jrqzhj{padding:2rem;}}</style><div class="css-1jrqzhj"><style data-emotion="css egutgn">.css-egutgn{margin-bottom:4rem;}@media screen and (min-width: 640px){.css-egutgn{margin-bottom:8rem;}}</style><header class="css-egutgn"><style data-emotion="css 1xwyizx">.css-1xwyizx{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}</style><style data-emotion="css 10klvkd">.css-10klvkd{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}</style><div class="css-10klvkd"><style data-emotion="css uxjqfw">.css-uxjqfw{color:var(--theme-ui-colors-heading);-webkit-text-decoration:none;text-decoration:none;}</style><a aria-label="JoralmoPro - Back to home" class="css-uxjqfw" href="/"><style data-emotion="css 102q2va">.css-102q2va{margin-top:0;margin-bottom:0;font-weight:500;font-size:1.5rem;}@media screen and (min-width: 640px){.css-102q2va{font-size:1.875rem;}}</style><div class="css-102q2va">JoralmoPro</div></a><style data-emotion="css zut31r">.css-zut31r{opacity:0.65;position:relative;border-radius:5px;width:40px;height:25px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;border:none;outline:none;background:none;cursor:pointer;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;}.css-zut31r:hover,.css-zut31r:focus{opacity:1;}</style><button type="button" aria-label="Activate Dark Mode" title="Activate Dark Mode" class="css-zut31r"><style data-emotion="css 1m6u41m">.css-1m6u41m{position:relative;width:24px;height:24px;border-radius:50%;border:none;background-color:var(--theme-ui-colors-transparent);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1);-webkit-transition:all 0.45s ease;transition:all 0.45s ease;overflow:hidden;box-shadow:inset 8px -8px 0px 0px var(--theme-ui-colors-toggleIcon);}.css-1m6u41m:before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:none;border-radius:50%;-webkit-transform:translate(0, 0);-moz-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0);opacity:1;-webkit-transition:-webkit-transform 0.45s ease;transition:transform 0.45s ease;}.css-1m6u41m:after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0 0 -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon),0 23px 0 var(--theme-ui-colors-toggleIcon),23px 0 0 var(--theme-ui-colors-toggleIcon),-23px 0 0 var(--theme-ui-colors-toggleIcon),15px 15px 0 var(--theme-ui-colors-toggleIcon),-15px 15px 0 var(--theme-ui-colors-toggleIcon),15px -15px 0 var(--theme-ui-colors-toggleIcon),-15px -15px 0 var(--theme-ui-colors-toggleIcon);-webkit-transform:scale(0);-moz-transform:scale(0);-ms-transform:scale(0);transform:scale(0);-webkit-transition:all 0.35s ease;transition:all 0.35s ease;}</style><div class="css-1m6u41m"></div></button></div><style data-emotion="css fp1v3n">.css-fp1v3n{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:var(--theme-ui-colors-divide);padding-bottom:1rem;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:1rem;color:var(--theme-ui-colors-secondary);-webkit-box-flex-flow:wrap;-webkit-flex-flow:wrap;-ms-flex-flow:wrap;flex-flow:wrap;}.css-fp1v3n a{color:var(--theme-ui-colors-secondary);}.css-fp1v3n a:hover{color:var(--theme-ui-colors-heading);}</style><div class="css-fp1v3n"><style data-emotion="css 1lx5s1f">.css-1lx5s1f{font-size:1rem;}.css-1lx5s1f a:not(:last-of-type){margin-right:1rem;}@media screen and (min-width: 640px){.css-1lx5s1f{font-size:18px;}}.css-1lx5s1f .active{color:var(--theme-ui-colors-heading);}</style><nav class="css-1lx5s1f"><style data-emotion="css bpdkdn">.css-bpdkdn{color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-bpdkdn:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a class="css-bpdkdn" href="/blog">Blog</a><a class="css-bpdkdn" href="/about">Acerca de</a></nav><style data-emotion="css 45ghvz">.css-45ghvz{font-size:1rem;}.css-45ghvz a:not(:first-of-type){margin-left:1rem;}@media screen and (min-width: 640px){.css-45ghvz{font-size:18px;}}</style><div class="css-45ghvz"><style data-emotion="css 1fmmdck">.css-1fmmdck{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-1fmmdck:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="https://twitter.com/JoralmoPro" class="css-1fmmdck">Twitter</a><a href="https://joralmo.pro" class="css-1fmmdck">Homepage</a></div></div></header><style data-emotion="css 1c3blfx">.css-1c3blfx [data-name='live-editor']{font-size:1rem;}.css-1c3blfx [data-name='live-editor'] textarea,.css-1c3blfx [data-name='live-editor'] pre{padding:1rem!important;}.css-1c3blfx [data-name='live-preview']{padding:calc(0.5rem + 10px)!important;background-color:#d2c7ec;}.css-1c3blfx .prism-code{font-size:1rem;padding:2rem 1rem 1rem 1rem;webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-transparent);min-width:100%;margin-bottom:0;margin-top:0;overflow:auto;}@media screen and (min-width: 640px){.css-1c3blfx .prism-code{font-size:1rem;}}@media screen and (min-width: 768px){.css-1c3blfx .prism-code{font-size:1.25rem;}}.css-1c3blfx .prism-code[data-linenumber="false"] .token-line{padding-left:1rem;}.css-1c3blfx .gatsby-highlight[data-language=''] .prism-code,.css-1c3blfx .gatsby-highlight[data-language='noLineNumbers'] .prism-code{padding-top:1rem;}.css-1c3blfx .token{display:inline-block;}.css-1c3blfx p>code,.css-1c3blfx li>code{background-color:var(--theme-ui-colors-gray-2);color:var(--theme-ui-colors-gray-8);padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;border-radius:2px;}.css-1c3blfx .gatsby-highlight{font-size:1rem;position:relative;webkit-overflow-scrolling:touch;background-color:rgb(1, 22, 39);border-radius:2px;margin-left:0;margin-right:0;}@media screen and (min-width: 640px){.css-1c3blfx .gatsby-highlight{font-size:1rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 768px){.css-1c3blfx .gatsby-highlight{font-size:1.25rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 1024px){.css-1c3blfx .gatsby-highlight{margin-left:-1rem;margin-right:-1rem;}}.css-1c3blfx .gatsby-highlight .token-line{margin-left:-1rem;margin-right:-1rem;min-width:100%;}.css-1c3blfx .gatsby-highlight pre code{float:left;min-width:100%;}.css-1c3blfx .gatsby-highlight pre[class*="language-"]:before{background-color:var(--theme-ui-colors-white);border-radius:0 0 0.25rem 0.25rem;color:var(--theme-ui-colors-black);font-size:12px;letter-spacing:0.025rem;padding:0.1rem 0.5rem;position:absolute;left:1rem;text-align:right;text-transform:uppercase;top:0;}.css-1c3blfx .gatsby-highlight pre[class~="language-javascript"]:before,.css-1c3blfx .gatsby-highlight pre[class~="language-js"]:before{content:"js";background:#f7df1e;color:var(--theme-ui-colors-black);}.css-1c3blfx .gatsby-highlight pre[class~="language-jsx"]:before{content:"jsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-1c3blfx .gatsby-highlight pre[class~="language-ts"]:before{content:"ts";background:#61dafb;color:var(--theme-ui-colors-black);}.css-1c3blfx .gatsby-highlight pre[class~="language-tsx"]:before{content:"tsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-1c3blfx .gatsby-highlight pre[class~="language-html"]:before{content:"html";background:#005a9c;color:var(--theme-ui-colors-white);}.css-1c3blfx .gatsby-highlight pre[class~="language-xml"]:before{content:"xml";background:#005a9c;color:var(--theme-ui-colors-white);}.css-1c3blfx .gatsby-highlight pre[class~="language-svg"]:before{content:"svg";background:#005a9c;color:var(--theme-ui-colors-white);}.css-1c3blfx .gatsby-highlight pre[class~="language-graphql"]:before{content:"GraphQL";background:#E10098;}.css-1c3blfx .gatsby-highlight pre[class~="language-css"]:before{content:"css";background:#ff9800;color:var(--theme-ui-colors-black);}.css-1c3blfx .gatsby-highlight pre[class~="language-mdx"]:before{content:"mdx";background:#f9ac00;color:var(--theme-ui-colors-black);}.css-1c3blfx .gatsby-highlight pre[class~="language-php"]:before{content:"php";background:#777bb3;color:var(--theme-ui-colors-black);}.css-1c3blfx .gatsby-highlight pre[class~="language-py"]:before,.css-1c3blfx .gatsby-highlight pre[class~="language-python"]:before{content:"py";background:#306998;color:var(--theme-ui-colors-white);}.css-1c3blfx .gatsby-highlight pre[class~="language-text"]:before{content:"text";}.css-1c3blfx .gatsby-highlight pre[class~='language-shell']:before{content:'shell';}.css-1c3blfx .gatsby-highlight pre[class~='language-sh']:before{content:'sh';}.css-1c3blfx .gatsby-highlight pre[class~='language-bash']:before{content:'bash';}.css-1c3blfx .gatsby-highlight pre[class~='language-yaml']:before{content:'yaml';background:#ffa8df;}.css-1c3blfx .gatsby-highlight pre[class~='language-yml']:before{content:'yml';background:#ffa8df;}.css-1c3blfx .gatsby-highlight pre[class~='language-markdown']:before{content:'md';}.css-1c3blfx .gatsby-highlight pre[class~='language-json']:before,.css-1c3blfx .gatsby-highlight pre[class~='language-json5']:before{content:'json';background:linen;}.css-1c3blfx .gatsby-highlight pre[class~='language-diff']:before{content:'diff';background:#e6ffed;}.css-1c3blfx .gatsby-highlight>code[class*="language-"],.css-1c3blfx .gatsby-highlight>pre[class=*="language-"]{word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-1c3blfx .gatsby-highlight pre::-webkit-scrollbar{width:0.5rem;height:0.5rem;}.css-1c3blfx .gatsby-highlight pre::-webkit-scrollbar-thumb{background-color:var(--theme-ui-colors-primary);}.css-1c3blfx .gatsby-highlight pre::-webkit-scrollbar-track{background:rgb(1, 22, 39);}.css-1c3blfx .line-number-style{display:inline-block;width:3em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;text-align:center;position:relative;}.css-1c3blfx .code-title{background-color:#d2c7ec;color:var(--theme-ui-colors-black);font-size:0.875rem;padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;margin-left:0;margin-right:0;}@media screen and (min-width: 640px){.css-1c3blfx .code-title{margin-left:0;margin-right:0;}}@media screen and (min-width: 768px){.css-1c3blfx .code-title{margin-left:0;margin-right:0;}}@media screen and (min-width: 1024px){.css-1c3blfx .code-title{margin-left:-1rem;margin-right:-1rem;}}.css-1c3blfx [data-name='live-preview'],.css-1c3blfx [data-name='live-editor']{margin-left:0;margin-right:0;font-size:1rem;}@media screen and (min-width: 640px){.css-1c3blfx [data-name='live-preview'],.css-1c3blfx [data-name='live-editor']{margin-left:0;margin-right:0;font-size:1rem;}}@media screen and (min-width: 768px){.css-1c3blfx [data-name='live-preview'],.css-1c3blfx [data-name='live-editor']{margin-left:0;margin-right:0;font-size:1.25rem;}}@media screen and (min-width: 1024px){.css-1c3blfx [data-name='live-preview'],.css-1c3blfx [data-name='live-editor']{margin-left:-1rem;margin-right:-1rem;}}.css-1c3blfx .token-line{padding-right:1rem;}.css-1c3blfx .highlight-line{background-color:rgb(2, 55, 81);border-left:4px solid rgb(2, 155, 206);}.css-1c3blfx .highlight-line .line-number-style{width:calc(3em - 4px);opacity:0.5;left:-2px;}.css-1c3blfx .react-live-wrapper{position:relative;}.css-1c3blfx .react-live-wrapper .code-copy-button{right:0;}@media screen and (min-width: 640px){.css-1c3blfx .react-live-wrapper .code-copy-button{right:0;}}@media screen and (min-width: 768px){.css-1c3blfx .react-live-wrapper .code-copy-button{right:0;}}@media screen and (min-width: 1024px){.css-1c3blfx .react-live-wrapper .code-copy-button{right:-1rem;}}</style><style data-emotion="css albdeh">.css-albdeh{box-sizing:border-box;margin:0;min-width:0;}.css-albdeh [data-name='live-editor']{font-size:1rem;}.css-albdeh [data-name='live-editor'] textarea,.css-albdeh [data-name='live-editor'] pre{padding:1rem!important;}.css-albdeh [data-name='live-preview']{padding:calc(0.5rem + 10px)!important;background-color:#d2c7ec;}.css-albdeh .prism-code{font-size:1rem;padding:2rem 1rem 1rem 1rem;webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-transparent);min-width:100%;margin-bottom:0;margin-top:0;overflow:auto;}@media screen and (min-width: 640px){.css-albdeh .prism-code{font-size:1rem;}}@media screen and (min-width: 768px){.css-albdeh .prism-code{font-size:1.25rem;}}.css-albdeh .prism-code[data-linenumber="false"] .token-line{padding-left:1rem;}.css-albdeh .gatsby-highlight[data-language=''] .prism-code,.css-albdeh .gatsby-highlight[data-language='noLineNumbers'] .prism-code{padding-top:1rem;}.css-albdeh .token{display:inline-block;}.css-albdeh p>code,.css-albdeh li>code{background-color:var(--theme-ui-colors-gray-2);color:var(--theme-ui-colors-gray-8);padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;border-radius:2px;}.css-albdeh .gatsby-highlight{font-size:1rem;position:relative;webkit-overflow-scrolling:touch;background-color:rgb(1, 22, 39);border-radius:2px;margin-left:0;margin-right:0;}@media screen and (min-width: 640px){.css-albdeh .gatsby-highlight{font-size:1rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 768px){.css-albdeh .gatsby-highlight{font-size:1.25rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 1024px){.css-albdeh .gatsby-highlight{margin-left:-1rem;margin-right:-1rem;}}.css-albdeh .gatsby-highlight .token-line{margin-left:-1rem;margin-right:-1rem;min-width:100%;}.css-albdeh .gatsby-highlight pre code{float:left;min-width:100%;}.css-albdeh .gatsby-highlight pre[class*="language-"]:before{background-color:var(--theme-ui-colors-white);border-radius:0 0 0.25rem 0.25rem;color:var(--theme-ui-colors-black);font-size:12px;letter-spacing:0.025rem;padding:0.1rem 0.5rem;position:absolute;left:1rem;text-align:right;text-transform:uppercase;top:0;}.css-albdeh .gatsby-highlight pre[class~="language-javascript"]:before,.css-albdeh .gatsby-highlight pre[class~="language-js"]:before{content:"js";background:#f7df1e;color:var(--theme-ui-colors-black);}.css-albdeh .gatsby-highlight pre[class~="language-jsx"]:before{content:"jsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-albdeh .gatsby-highlight pre[class~="language-ts"]:before{content:"ts";background:#61dafb;color:var(--theme-ui-colors-black);}.css-albdeh .gatsby-highlight pre[class~="language-tsx"]:before{content:"tsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-albdeh .gatsby-highlight pre[class~="language-html"]:before{content:"html";background:#005a9c;color:var(--theme-ui-colors-white);}.css-albdeh .gatsby-highlight pre[class~="language-xml"]:before{content:"xml";background:#005a9c;color:var(--theme-ui-colors-white);}.css-albdeh .gatsby-highlight pre[class~="language-svg"]:before{content:"svg";background:#005a9c;color:var(--theme-ui-colors-white);}.css-albdeh .gatsby-highlight pre[class~="language-graphql"]:before{content:"GraphQL";background:#E10098;}.css-albdeh .gatsby-highlight pre[class~="language-css"]:before{content:"css";background:#ff9800;color:var(--theme-ui-colors-black);}.css-albdeh .gatsby-highlight pre[class~="language-mdx"]:before{content:"mdx";background:#f9ac00;color:var(--theme-ui-colors-black);}.css-albdeh .gatsby-highlight pre[class~="language-php"]:before{content:"php";background:#777bb3;color:var(--theme-ui-colors-black);}.css-albdeh .gatsby-highlight pre[class~="language-py"]:before,.css-albdeh .gatsby-highlight pre[class~="language-python"]:before{content:"py";background:#306998;color:var(--theme-ui-colors-white);}.css-albdeh .gatsby-highlight pre[class~="language-text"]:before{content:"text";}.css-albdeh .gatsby-highlight pre[class~='language-shell']:before{content:'shell';}.css-albdeh .gatsby-highlight pre[class~='language-sh']:before{content:'sh';}.css-albdeh .gatsby-highlight pre[class~='language-bash']:before{content:'bash';}.css-albdeh .gatsby-highlight pre[class~='language-yaml']:before{content:'yaml';background:#ffa8df;}.css-albdeh .gatsby-highlight pre[class~='language-yml']:before{content:'yml';background:#ffa8df;}.css-albdeh .gatsby-highlight pre[class~='language-markdown']:before{content:'md';}.css-albdeh .gatsby-highlight pre[class~='language-json']:before,.css-albdeh .gatsby-highlight pre[class~='language-json5']:before{content:'json';background:linen;}.css-albdeh .gatsby-highlight pre[class~='language-diff']:before{content:'diff';background:#e6ffed;}.css-albdeh .gatsby-highlight>code[class*="language-"],.css-albdeh .gatsby-highlight>pre[class=*="language-"]{word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-albdeh .gatsby-highlight pre::-webkit-scrollbar{width:0.5rem;height:0.5rem;}.css-albdeh .gatsby-highlight pre::-webkit-scrollbar-thumb{background-color:var(--theme-ui-colors-primary);}.css-albdeh .gatsby-highlight pre::-webkit-scrollbar-track{background:rgb(1, 22, 39);}.css-albdeh .line-number-style{display:inline-block;width:3em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;text-align:center;position:relative;}.css-albdeh .code-title{background-color:#d2c7ec;color:var(--theme-ui-colors-black);font-size:0.875rem;padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;margin-left:0;margin-right:0;}@media screen and (min-width: 640px){.css-albdeh .code-title{margin-left:0;margin-right:0;}}@media screen and (min-width: 768px){.css-albdeh .code-title{margin-left:0;margin-right:0;}}@media screen and (min-width: 1024px){.css-albdeh .code-title{margin-left:-1rem;margin-right:-1rem;}}.css-albdeh [data-name='live-preview'],.css-albdeh [data-name='live-editor']{margin-left:0;margin-right:0;font-size:1rem;}@media screen and (min-width: 640px){.css-albdeh [data-name='live-preview'],.css-albdeh [data-name='live-editor']{margin-left:0;margin-right:0;font-size:1rem;}}@media screen and (min-width: 768px){.css-albdeh [data-name='live-preview'],.css-albdeh [data-name='live-editor']{margin-left:0;margin-right:0;font-size:1.25rem;}}@media screen and (min-width: 1024px){.css-albdeh [data-name='live-preview'],.css-albdeh [data-name='live-editor']{margin-left:-1rem;margin-right:-1rem;}}.css-albdeh .token-line{padding-right:1rem;}.css-albdeh .highlight-line{background-color:rgb(2, 55, 81);border-left:4px solid rgb(2, 155, 206);}.css-albdeh .highlight-line .line-number-style{width:calc(3em - 4px);opacity:0.5;left:-2px;}.css-albdeh .react-live-wrapper{position:relative;}.css-albdeh .react-live-wrapper .code-copy-button{right:0;}@media screen and (min-width: 640px){.css-albdeh .react-live-wrapper .code-copy-button{right:0;}}@media screen and (min-width: 768px){.css-albdeh .react-live-wrapper .code-copy-button{right:0;}}@media screen and (min-width: 1024px){.css-albdeh .react-live-wrapper .code-copy-button{right:-1rem;}}</style><main id="skip-nav" class=" css-albdeh"><style data-emotion="css 1aue9xx">.css-1aue9xx{box-sizing:border-box;margin:0;min-width:0;font-family:inherit;font-weight:700;line-height:1.25;font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:2.25rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-1aue9xx{font-size:3rem;}}@media screen and (min-width: 768px){.css-1aue9xx{font-size:3rem;}}@media screen and (min-width: 1024px){.css-1aue9xx{font-size:4rem;}}</style><h1 class="css-1aue9xx">Pruebas de carga con k6</h1><style data-emotion="css 15ce8we">.css-15ce8we{color:var(--theme-ui-colors-secondary);margin-top:1rem;font-size:1rem;}.css-15ce8we a{color:var(--theme-ui-colors-secondary);}@media screen and (min-width: 640px){.css-15ce8we{font-size:1rem;}}@media screen and (min-width: 768px){.css-15ce8we{font-size:1.25rem;}}</style><p class="css-15ce8we"><time>20.06.2022</time> — <!-- --><a class="css-bpdkdn" href="/tags/load-test">load-test</a>, <!-- --><a class="css-bpdkdn" href="/tags/tutorial">tutorial</a>, <!-- --><a class="css-bpdkdn" href="/tags/go">Go</a>, <!-- --><a class="css-bpdkdn" href="/tags/postman">Postman</a>, <!-- --><a class="css-bpdkdn" href="/tags/jwt">jwt</a>, <!-- --><a class="css-bpdkdn" href="/tags/programacion">programación</a>, <!-- --><a class="css-bpdkdn" href="/tags/heroku">heroku</a> — <!-- --><span>8<!-- --> min read<!-- --></span></p><style data-emotion="css b56ay0">.css-b56ay0{margin-top:4rem;margin-bottom:4rem;}.css-b56ay0 .gatsby-resp-image-wrapper{margin-top:2rem;margin-bottom:2rem;box-shadow:rgba(0, 0, 0, 0.15) 0px 32px 32px 0px,rgba(0, 0, 0, 0.15) 0px 16px 16px 0px,rgba(0, 0, 0, 0.15) 0px 8px 8px 0px,rgba(0, 0, 0, 0.15) 0px 4px 4px 0px;}@media screen and (min-width: 640px){.css-b56ay0 .gatsby-resp-image-wrapper{margin-top:2rem;margin-bottom:2rem;}}@media screen and (min-width: 768px){.css-b56ay0 .gatsby-resp-image-wrapper{margin-top:4rem;margin-bottom:4rem;}}</style><section class="css-b56ay0"><style data-emotion="css 1o6lusp">.css-1o6lusp{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.5rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-1o6lusp{font-size:1.875rem;}}@media screen and (min-width: 768px){.css-1o6lusp{font-size:1.875rem;}}@media screen and (min-width: 1024px){.css-1o6lusp{font-size:2.25rem;}}</style><h3 class="css-1o6lusp">Hola mundo, bienvenidos a este tutorial donde voy a intentar explicar como aplicar pruebas de carga con k6 sobre una pequeña api que construiré en Go.</h3><style data-emotion="css 1ccrm8j">.css-1ccrm8j{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;word-break:break-word;}@media screen and (min-width: 640px){.css-1ccrm8j{font-size:1rem;}}@media screen and (min-width: 768px){.css-1ccrm8j{font-size:1.25rem;}}</style><p class="css-1ccrm8j">Como mencioné primero construiré una pequeña api en Go que es la que posteriormente se le aplicará las pruebas, entonces empecemos con el proceso de construcción de la api.</p><p class="css-1ccrm8j">Para este caso vamos a usar <!-- --><style data-emotion="css 1bw77fa">.css-1bw77fa{color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-1bw77fa:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="https://docs.gofiber.io/" target="_blank" class="css-1bw77fa">Fiber</a> una librería de Go que nos permite construir una api rápido y sencillo y además es bastante &quot;similar&quot; a Express para los que nos gusta usar Nodejs.<!-- --></p><p class="css-1ccrm8j">Entonces empezamos, creamos un directorio y dentro de el creamos nuestro archivo <!-- --><code class="css-0">main.go</code> y ejecutamos por consola los siguiente comandos:<!-- --></p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><style data-emotion="css dybovu">.css-dybovu{background-color:rgba(107,70,193,0.2);border:none;color:var(--theme-ui-colors-gray-2);cursor:pointer;font-size:14px;font-family:"IBM Plex Sans",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";letter-spacing:0.025rem;-webkit-transition:default;transition:default;position:absolute;top:0;right:0;z-index:1;border-radius:0 0 0 0.25rem;padding:0.25rem 0.6rem;}@media screen and (min-width: 640px){.css-dybovu{font-size:14px;}}@media screen and (min-width: 768px){.css-dybovu{font-size:16px;}}.css-dybovu[disabled]{cursor:not-allowed;}.css-dybovu:not([disabled]):hover{background-color:var(--theme-ui-colors-primary);color:var(--theme-ui-colors-white);}</style><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><style data-emotion="css 15vf505">.css-15vf505{border:0;clip:rect(0, 0, 0, 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px;}</style><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-bash"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token plain">go mod init joralmo.pro/JoralmoPro/msExample</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain">go get -u github.com/gofiber/fiber/v2</span></div></code></pre></div><p class="css-1ccrm8j">Los anteriores comandos son para iniciar el &quot;proyecto&quot; en Go, y luego instalamos la librería de Fiber.</p><p class="css-1ccrm8j">Ahora en el archivo <!-- --><code class="css-0">main.go</code>empezamos a escribir la api:<!-- --></p><div class="gatsby-highlight" data-language="go"><pre class="prism-code language-go" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-go"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token keyword" style="color:rgb(127, 219, 202)">package</span><span class="token plain"> main</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3<!-- --></span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4<!-- --></span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;os&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6<!-- --></span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;github.com/gofiber/fiber/v2&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7<!-- --></span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8<!-- --></span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9<!-- --></span><span class="token plain">  app </span><span class="token operator" style="color:rgb(127, 219, 202)">:=</span><span class="token plain"> fiber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">New</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">10<!-- --></span><span class="token plain">  app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;/&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">c </span><span class="token operator" style="color:rgb(127, 219, 202)">*</span><span class="token plain">fiber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Ctx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">error</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">11<!-- --></span><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">SendString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Hello, World!&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">12<!-- --></span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">13<!-- --></span><span class="token plain">  port </span><span class="token operator" style="color:rgb(127, 219, 202)">:=</span><span class="token plain"> os</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Getenv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;PORT&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">14<!-- --></span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> port </span><span class="token operator" style="color:rgb(127, 219, 202)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">15<!-- --></span><span class="token plain">    port </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;3000&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">16<!-- --></span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">17<!-- --></span><span class="token plain">  app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;:&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">+</span><span class="token plain"> port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">18<!-- --></span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></code></pre></div><p class="css-1ccrm8j">Esto solo para probar que funciona, ejecutamos en consola <!-- --><code class="css-0">go run main.go</code> y vamos al navegador en <!-- --><a href="http://localhost:3000" target="_blank" class="css-1bw77fa">localhost:3000</a> y vemos que nos devuelve el mensaje &quot;Hello, World!&quot;.<!-- --></p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:656px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:33.75%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABA0lEQVQoz63My07CUABF0TsWwm1rRMOjBapICm2BAsUHImIsEKAVjY//0hg0Tpz5ldtQTXDgyDBY2Wd0xHuzytIyWfXNPeQz6PPst5leTOmdjwlGEWH0SBg9xPtqOCWcLPA7fWzHx613cdw18dqweKmaLFe1y3yctnhqNVgMxgxOBixGc+7nt9zNboiCGZOzS66HY3reMe2ah++06PwiuqUinp7naL8Uc/bSOLs7NLJZXL2IndWpZfIxO6fj5AvYOYO6UaJZNGkWzO/+EAeWRcYwMCsVypaFmk6zJRUSikJSpkgqck2uJWTqT0KRKTRVRZEyttrbmvZvQtM0NkmoqrrRwy8h0cYEo1tDmgAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="Imagen de prueba inicial" title="Imagen de prueba inicial" src="/static/a03e74b5d81cd28cae971cfb5fdf8f50/abbf1/localhost.png" srcSet="/static/a03e74b5d81cd28cae971cfb5fdf8f50/5243c/localhost.png 240w,/static/a03e74b5d81cd28cae971cfb5fdf8f50/ab158/localhost.png 480w,/static/a03e74b5d81cd28cae971cfb5fdf8f50/abbf1/localhost.png 656w" sizes="(max-width: 656px) 100vw, 656px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span><p class="css-1ccrm8j">Para colocar mas lógica a nuestra api agregaremos un nuevo endpoint que nos retornará un listado de usuarios generados con <!-- --><a href="https://pkg.go.dev/github.com/bxcodec/faker/v3#section-readme" target="_blank" class="css-1bw77fa">Faker</a> (un paquete que genera data aleatoria) y en este caso la generará basada en un modelo de usuarios que crearemos, primero instalamos el paquete, desde la consola ejecutamos:<!-- --></p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-bash"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token plain">go get -u github.com/bxcodec/faker/v3</span></div></code></pre></div><p class="css-1ccrm8j">Añadimos el modelo de usuarios a nuestro archivo <!-- --><code class="css-0">main.go</code> (después de los imports):<!-- --></p><div class="gatsby-highlight" data-language="go"><pre class="prism-code language-go" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-go"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token keyword" style="color:rgb(127, 219, 202)">type</span><span class="token plain"> User </span><span class="token keyword" style="color:rgb(127, 219, 202)">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain">    Id         </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3<!-- --></span><span class="token plain">    FirstName  </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">`faker:&quot;first_name&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4<!-- --></span><span class="token plain">    LastName   </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">`faker:&quot;last_name&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5<!-- --></span><span class="token plain">    Email      </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">`faker:&quot;email&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6<!-- --></span><span class="token plain">    UserName   </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">`faker:&quot;username&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7<!-- --></span><span class="token plain">    IPV4       </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">`faker:&quot;ipv4&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8<!-- --></span><span class="token plain">    DomainName </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">`faker:&quot;domain_name&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9<!-- --></span><span class="token plain">    Latitude   </span><span class="token builtin" style="color:rgb(130, 170, 255)">float32</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">`faker:&quot;lat&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">10<!-- --></span><span class="token plain">    Longitude  </span><span class="token builtin" style="color:rgb(130, 170, 255)">float32</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">`faker:&quot;long&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">11<!-- --></span><span class="token plain">    Phone      </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">`faker:&quot;phone_number&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">12<!-- --></span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></code></pre></div><p class="css-1ccrm8j">importamos el paquete de faker:</p><div class="gatsby-highlight" data-language="go"><pre class="prism-code language-go" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-go"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token string" style="color:rgb(173, 219, 103)">&quot;github.com/bxcodec/faker/v3&quot;</span></div></code></pre></div><p class="css-1ccrm8j">y ahora el endpoint que retorna el listado de usuarios (antes de declarar la variable port):</p><div class="gatsby-highlight" data-language="go"><pre class="prism-code language-go" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-go"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token plain">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;/users&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">c </span><span class="token operator" style="color:rgb(127, 219, 202)">*</span><span class="token plain">fiber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Ctx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">error</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> users </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">User</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3<!-- --></span><span class="token plain">  err </span><span class="token operator" style="color:rgb(127, 219, 202)">:=</span><span class="token plain"> faker</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">FakeData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(127, 219, 202)">&amp;</span><span class="token plain">users</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4<!-- --></span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(127, 219, 202)">!=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5<!-- --></span><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> err</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6<!-- --></span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7<!-- --></span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">users</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8<!-- --></span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></code></pre></div><p class="css-1ccrm8j">Corremos nuevamente el proyecto y vemos que nos devuelve un listado de usuarios aleatorios (la cantidad de usuarios varia en cada solicitud que enviamos).</p><p class="css-1ccrm8j"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:67.5%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABdElEQVQ4y52TTXLcIBCFdZJI9B8CJE1GjO0s7KrcwmtfwQfLQXKpl6JHmtiTSSr24ivRCF6/bqCbpgmlFKzrirVW1Fo9zjn/QUrJ+T1XkIwwPz3j8fUnji8/0MUYkXJGKRmn4wGlJJgZYmxEqKrHDSJyQgjOeTwgsCEev0OWJ3R7ZmYGhwEUAoZhgIi4SBvvAmH75yZS8rglbGZSFJgQurbxelOjJWiLr+cbtrnf15lFqEWIKLq+713wLbuTW+6cfmMb9/0Xp8VdGkfPsGd92yu6Etv7KaZQU4gqxARsI3Q8gFjRnU4n74efbMn+PZ/miKj6zvEl0RWBGGojuJWsKiBir/9S1o2+vSv5Jj2YCR1RgMYRh7tvmHLCnOKl1L8J/wsXtDFhqff4OmXUuSCqfFjoIshE7vD48Ih5mVHXBSp88yr9l6AIQ9Tcpan4C/msu7NDZj/+NC1+LYTp0+42QXJ3reS6TLg7TN7D1tth+JhYu0K/ALeFjuP8uMWzAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="Imagen de prueba de listado de usuarios" title="Imagen de prueba de listado de usuarios" src="/static/2c17cf69a28d3a2fb43d75584efd87a3/7d769/test_endpoint_users.png" srcSet="/static/2c17cf69a28d3a2fb43d75584efd87a3/5243c/test_endpoint_users.png 240w,/static/2c17cf69a28d3a2fb43d75584efd87a3/ab158/test_endpoint_users.png 480w,/static/2c17cf69a28d3a2fb43d75584efd87a3/7d769/test_endpoint_users.png 960w,/static/2c17cf69a28d3a2fb43d75584efd87a3/87339/test_endpoint_users.png 1440w,/static/2c17cf69a28d3a2fb43d75584efd87a3/88b03/test_endpoint_users.png 1920w,/static/2c17cf69a28d3a2fb43d75584efd87a3/18504/test_endpoint_users.png 2026w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span></p><p class="css-1ccrm8j">Para añadirle un poco mas de complejidad al momento de hacer las pruebas de carga, vamos a añadir autenticación a nuestra api, utilizaremos jwt para esto, instalaremos los siguientes paquetes:</p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-bash"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token plain">go get -u github.com/gofiber/jwt/v3</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain">go get -u github.com/golang-jwt/jwt/v4</span></div></code></pre></div><p class="css-1ccrm8j">y ahora en el archivo <!-- --><code class="css-0">main.go</code> importamos los paquetes instalados:<!-- --></p><div class="gatsby-highlight" data-language="go"><pre class="prism-code language-go" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-go"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token plain">jwtware </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;github.com/gofiber/jwt/v3&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain"></span><span class="token string" style="color:rgb(173, 219, 103)">&quot;github.com/golang-jwt/jwt/v4&quot;</span></div></code></pre></div><p class="css-1ccrm8j">Añadimos un endpoint (después del primer endpoint que añadimos &quot;/&quot;) para autenticarnos y obtener un token, solamente validará el password recibido que sea igual a &quot;admin&quot; construirá el token y lo retornará:</p><div class="gatsby-highlight" data-language="go"><pre class="prism-code language-go" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-go"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token plain">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Post</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;/login&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">c </span><span class="token operator" style="color:rgb(127, 219, 202)">*</span><span class="token plain">fiber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Ctx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">error</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain">  user </span><span class="token operator" style="color:rgb(127, 219, 202)">:=</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">FormValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3<!-- --></span><span class="token plain">  password </span><span class="token operator" style="color:rgb(127, 219, 202)">:=</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">FormValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;password&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5<!-- --></span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> password </span><span class="token operator" style="color:rgb(127, 219, 202)">!=</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;admin&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6<!-- --></span><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">SendStatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">StatusUnauthorized</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7<!-- --></span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9<!-- --></span><span class="token plain">  claims </span><span class="token operator" style="color:rgb(127, 219, 202)">:=</span><span class="token plain"> jwt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">MapClaims</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">10<!-- --></span><span class="token plain">    </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;name&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">     user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">11<!-- --></span><span class="token plain">    </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;password&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> password</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">12<!-- --></span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">13<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">14<!-- --></span><span class="token plain">  token </span><span class="token operator" style="color:rgb(127, 219, 202)">:=</span><span class="token plain"> jwt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NewWithClaims</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">jwt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SigningMethodHS256</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> claims</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">15<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">16<!-- --></span><span class="token plain">  t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(127, 219, 202)">:=</span><span class="token plain"> token</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">SignedString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token function" style="color:rgb(130, 170, 255)">byte</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;TheBestSecret&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">17<!-- --></span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(127, 219, 202)">!=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">18<!-- --></span><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">SendStatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">StatusInternalServerError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">19<!-- --></span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">20<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">21<!-- --></span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;token&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">22<!-- --></span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></code></pre></div><p class="css-1ccrm8j">Seguido a este endpoint, le indicaremos a fiber que utilice un middleware para validar el token recibido, importante saber que todos los endpoints definidos antes de esto estarán sin protección, los definidos después validaran que se reciba el token para poder retornar una respuesta (el secret debe ser el mismo).</p><div class="gatsby-highlight" data-language="go"><pre class="prism-code language-go" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-go"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token plain">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Use</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">jwtware</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">New</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">jwtware</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain">  SigningKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token function" style="color:rgb(130, 170, 255)">byte</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;TheBestSecret&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3<!-- --></span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></code></pre></div><p class="css-1ccrm8j">Una vez agregado el endpoint y el middleware corremos nuevamente el proyecto e intentamos de nuevo obtener los usuarios (sin ningún cambio aún) y vemos que nos devuelve un error.</p><p class="css-1ccrm8j"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:36.66666666666667%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA7UlEQVQoz21RW27EIAzkIJUC2IZAII3SpnfpT0/VG/SgU9m77EZpP0YDlp8zrveOWitaa9j3He/HgW3bLLYsi3EpxXieZ+Scn7C/INdXHJ/f2L9+4FJKyCmh1IqcBL1kEEUQEZjZeLxjjPDeXxDg/QQ/vSAGDycitoEWhBAsabAO0/iIDWhsXVdorQ7TK1tf7Qp3bnAuUmiybjX+PvhHHkV61hkmBN2Q70V04fNZ581YGJQYxPRAVDmkIFKC+3jbzYQhvBqh76HtrfmpIf/TkBicF7DMcOrccLq3G6s2LALRyRddDZP/Y44aEmPALzJByMmECZeDAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="Imagen de prueba de listado de usuarios sin token" title="Imagen de prueba de listado de usuarios sin token" src="/static/e1256a4e44771a7291c4355c31fe6422/7d769/error_token.png" srcSet="/static/e1256a4e44771a7291c4355c31fe6422/5243c/error_token.png 240w,/static/e1256a4e44771a7291c4355c31fe6422/ab158/error_token.png 480w,/static/e1256a4e44771a7291c4355c31fe6422/7d769/error_token.png 960w,/static/e1256a4e44771a7291c4355c31fe6422/87339/error_token.png 1440w,/static/e1256a4e44771a7291c4355c31fe6422/88b03/error_token.png 1920w,/static/e1256a4e44771a7291c4355c31fe6422/636bd/error_token.png 2020w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span></p><p class="css-1ccrm8j">Seguido haremos &quot;inicio de sesión&quot; y veremos que nos devuelve el token:</p><p class="css-1ccrm8j"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:41.25%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABJ0lEQVQoz3WR6W3DMAyFNUgBWwd12Uos2znQZJMCnasDdM9XkIqdFkh/fJAo8vGSmqYJOWeM44haK+ZlBr+lnOSdiTEipSSEEJ7EiBAIIR9x/vjC/PkN5b0Xpwg5KEWUIQs+BEkWRRhgjEHf9y/o0Hdv0LqH2ipLYk/YCvA5DMPuIyIRa62bbxzhnBNba4OcB5RSoG73O+o0oeu6P1XZ5oScfPM18T88/GqdZ8nMQkdOqm+VuSse87eQHIE4htyOJYILAywFqPNpbZ/Ao+e8jxljkhUYrZ/d9VoKWGvlNLahjQGFBEceyliLw7FgWSuupxnvl+XBitt1xWWtmKciLLXs92YfUMaEnDxScqhTgTKmLdl7Qoqhwb8b2t0TSXfS0Uu0wDG8qh+SlunkKso/qgAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="Imagen de prueba de login" title="Imagen de prueba de login" src="/static/031f7ad0c8639aa46bcafcfaa2104cbc/7d769/test_login_endpoint.png" srcSet="/static/031f7ad0c8639aa46bcafcfaa2104cbc/5243c/test_login_endpoint.png 240w,/static/031f7ad0c8639aa46bcafcfaa2104cbc/ab158/test_login_endpoint.png 480w,/static/031f7ad0c8639aa46bcafcfaa2104cbc/7d769/test_login_endpoint.png 960w,/static/031f7ad0c8639aa46bcafcfaa2104cbc/87339/test_login_endpoint.png 1440w,/static/031f7ad0c8639aa46bcafcfaa2104cbc/88b03/test_login_endpoint.png 1920w,/static/031f7ad0c8639aa46bcafcfaa2104cbc/c54f8/test_login_endpoint.png 2014w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span></p><p class="css-1ccrm8j">Volvemos a testear el endpoint de usuarios enviando el token y veremos que nos devuelve el listado de usuarios:</p><p class="css-1ccrm8j"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:66.66666666666666%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABlElEQVQ4y52Ta27cMAyEfZKsHqREibL8WKybnKVA79UD5JxTiN4uts2PpvnxgRZAjTgjeerzjKqKZV2xbhu2fceyLiiloNZqiIitByln5GcSIdUVt+8/sf94x0TMaEy4aoFqQRYBMSGlZEKD8T02j0pEH2AiePeCGAOmyAmdIg4KaKoQyYgxmtDvCVUVqhW5KFgaUpnBuVpfHIKcEEJECAFTrQWtr0bVjpQLmNlOds7BO2c1OIeNIm614tCTmyoOyVDv8OIu1judNhIoCSJncCp2svf+FPT+xDksFPE6K45W8a1Vq69aLDJPghAZ03HdsfSOUgSlilkrIvfAE2IID1HnvR0WYjgJAYEifCRwVhDLsFzRWkOMZ7hEbJbH5Mxkm54ndfcI/sZ7ZwNMZ6NDkoLaVyQa4XpcLpenZv9PnDvrZBa8R2kdy37D3gpWLaB7jv/LQ1C0YT3esPaGresHq58WHM9jiJrl1qE63p98SewhSBRBnMAp27SW3RfEHoLjEkRnbMcbrl0xV/njuXzuUpz9Kb8A7GV0/NqYxGwAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="Imagen de prueba de listado de usuarios con token" title="Imagen de prueba de listado de usuarios con token" src="/static/e7bdd620cfdbc0f1d242ad2471e5a139/7d769/endpoint_users_with_token.png" srcSet="/static/e7bdd620cfdbc0f1d242ad2471e5a139/5243c/endpoint_users_with_token.png 240w,/static/e7bdd620cfdbc0f1d242ad2471e5a139/ab158/endpoint_users_with_token.png 480w,/static/e7bdd620cfdbc0f1d242ad2471e5a139/7d769/endpoint_users_with_token.png 960w,/static/e7bdd620cfdbc0f1d242ad2471e5a139/87339/endpoint_users_with_token.png 1440w,/static/e7bdd620cfdbc0f1d242ad2471e5a139/88b03/endpoint_users_with_token.png 1920w,/static/e7bdd620cfdbc0f1d242ad2471e5a139/636bd/endpoint_users_with_token.png 2020w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span></p><style data-emotion="css 1xhzgp9">.css-1xhzgp9{background-color:var(--theme-ui-colors-muted);border:0;height:1px;margin:1rem;margin-left:0;margin-right:0;}</style><hr class="css-1xhzgp9"/><p class="css-1ccrm8j">Esto sería todo por la parte de Go para nuestra api, el archivo <!-- --><code class="css-0">main.go</code>quedaría así:<!-- --></p><div class="gatsby-highlight" data-language="go"><pre class="prism-code language-go" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-go"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token keyword" style="color:rgb(127, 219, 202)">package</span><span class="token plain"> main</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3<!-- --></span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4<!-- --></span><span class="token plain">    </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;os&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6<!-- --></span><span class="token plain">    </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;github.com/bxcodec/faker/v3&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7<!-- --></span><span class="token plain">    </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;github.com/gofiber/fiber/v2&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8<!-- --></span><span class="token plain">    jwtware </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;github.com/gofiber/jwt/v3&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9<!-- --></span><span class="token plain">    </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;github.com/golang-jwt/jwt/v4&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">10<!-- --></span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">11<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">12<!-- --></span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">type</span><span class="token plain"> User </span><span class="token keyword" style="color:rgb(127, 219, 202)">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">13<!-- --></span><span class="token plain">    Id         </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">14<!-- --></span><span class="token plain">    FirstName  </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">`faker:&quot;first_name&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">15<!-- --></span><span class="token plain">    LastName   </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">`faker:&quot;last_name&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">16<!-- --></span><span class="token plain">    Email      </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">`faker:&quot;email&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">17<!-- --></span><span class="token plain">    UserName   </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">`faker:&quot;username&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">18<!-- --></span><span class="token plain">    IPV4       </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">`faker:&quot;ipv4&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">19<!-- --></span><span class="token plain">    DomainName </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">`faker:&quot;domain_name&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">20<!-- --></span><span class="token plain">    Latitude   </span><span class="token builtin" style="color:rgb(130, 170, 255)">float32</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">`faker:&quot;lat&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">21<!-- --></span><span class="token plain">    Longitude  </span><span class="token builtin" style="color:rgb(130, 170, 255)">float32</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">`faker:&quot;long&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">22<!-- --></span><span class="token plain">    Phone      </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">`faker:&quot;phone_number&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">23<!-- --></span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">24<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">25<!-- --></span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">26<!-- --></span><span class="token plain">    app </span><span class="token operator" style="color:rgb(127, 219, 202)">:=</span><span class="token plain"> fiber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">New</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">27<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">28<!-- --></span><span class="token plain">    app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;/&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">c </span><span class="token operator" style="color:rgb(127, 219, 202)">*</span><span class="token plain">fiber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Ctx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">error</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">29<!-- --></span><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">SendString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Hello, World!&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">30<!-- --></span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">31<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">32<!-- --></span><span class="token plain">    app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Post</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;/login&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">c </span><span class="token operator" style="color:rgb(127, 219, 202)">*</span><span class="token plain">fiber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Ctx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">error</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">33<!-- --></span><span class="token plain">        user </span><span class="token operator" style="color:rgb(127, 219, 202)">:=</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">FormValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;user&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">34<!-- --></span><span class="token plain">        password </span><span class="token operator" style="color:rgb(127, 219, 202)">:=</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">FormValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;password&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">35<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">36<!-- --></span><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> password </span><span class="token operator" style="color:rgb(127, 219, 202)">!=</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;admin&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">37<!-- --></span><span class="token plain">            </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">SendStatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">StatusUnauthorized</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">38<!-- --></span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">39<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">40<!-- --></span><span class="token plain">        claims </span><span class="token operator" style="color:rgb(127, 219, 202)">:=</span><span class="token plain"> jwt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">MapClaims</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">41<!-- --></span><span class="token plain">            </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;name&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">     user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">42<!-- --></span><span class="token plain">            </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;password&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> password</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">43<!-- --></span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">44<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">45<!-- --></span><span class="token plain">        token </span><span class="token operator" style="color:rgb(127, 219, 202)">:=</span><span class="token plain"> jwt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NewWithClaims</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">jwt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SigningMethodHS256</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> claims</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">46<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">47<!-- --></span><span class="token plain">        t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(127, 219, 202)">:=</span><span class="token plain"> token</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">SignedString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token function" style="color:rgb(130, 170, 255)">byte</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;TheBestSecret&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">48<!-- --></span><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(127, 219, 202)">!=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">49<!-- --></span><span class="token plain">            </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">SendStatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">StatusInternalServerError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">50<!-- --></span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">51<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">52<!-- --></span><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fiber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;token&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">53<!-- --></span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">54<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">55<!-- --></span><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Colocar antes de las rutas que se requieren proteger</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">56<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">57<!-- --></span><span class="token plain">    app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Use</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">jwtware</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">New</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">jwtware</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">58<!-- --></span><span class="token plain">        SigningKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token function" style="color:rgb(130, 170, 255)">byte</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;TheBestSecret&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">59<!-- --></span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">60<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">61<!-- --></span><span class="token plain">    app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;/users&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">c </span><span class="token operator" style="color:rgb(127, 219, 202)">*</span><span class="token plain">fiber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Ctx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">error</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">62<!-- --></span><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> users </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">User</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">63<!-- --></span><span class="token plain">        err </span><span class="token operator" style="color:rgb(127, 219, 202)">:=</span><span class="token plain"> faker</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">FakeData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(127, 219, 202)">&amp;</span><span class="token plain">users</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">64<!-- --></span><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(127, 219, 202)">!=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">65<!-- --></span><span class="token plain">            </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> err</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">66<!-- --></span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">67<!-- --></span><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">users</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">68<!-- --></span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">69<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">70<!-- --></span><span class="token plain">    port </span><span class="token operator" style="color:rgb(127, 219, 202)">:=</span><span class="token plain"> os</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Getenv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;PORT&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">71<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">72<!-- --></span><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> port </span><span class="token operator" style="color:rgb(127, 219, 202)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">73<!-- --></span><span class="token plain">        port </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;3000&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">74<!-- --></span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">75<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">76<!-- --></span><span class="token plain">    app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;:&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">+</span><span class="token plain"> port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">77<!-- --></span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></code></pre></div><hr class="css-1xhzgp9"/><p class="css-1ccrm8j">Solo para hacer el tutorial mas interesante (para mí xD) publicaremos esta pequeña app de go en heroku, gracias al cli de heroku esto es un poco sencillo, lo primero es instalar el cli de heroku (<!-- --><a href="https://devcenter.heroku.com/articles/heroku-cli" target="_blank" class="css-1bw77fa">Instrucciones de instalación</a>), una vez instalado el cli, ejecutar el comando:<!-- --></p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-bash"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token plain">heroku login</span></div></code></pre></div><p class="css-1ccrm8j">Esto abre un navegador y te permite ingresar a heroku</p><undefined><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:73.75%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACgklEQVQ4y52QW08TURSF528JUUmQTlvKRSSUXqZgbaIQjRKkaKBY6GVmCghIpJQCPrZNEV/0D8CDJZFnUQggNAJtuRRaWkg7y5zToUAAH5jky96z9trrnBmGUzlxHSaVC5zSiSe1Ip7WD6BV+x6Pq3iq0dkNewxHh9djVDrR1erHsGMG/bYg2s1jMLAO/G+HMZLFGyCGDosX/qGvlJemURiV8mE3wBADReW+gkHpwtsWP9qaP2KgJ4R2sxd6lnzaVe9ZDmNQkkU3DKwL+gsQTVvuwJtnfow4Z9HfE8Jz/Qc0PnDQgy57C35CMZBTCzBpRJgqhSJcpQBzbT8sjwZhqRtEc5Xn0pyiEWFU8+eBepY0PCJzPxHbOsDGWgzRP3GZBDbX49hcj9F6pp3NiTcRS+Lb5wXU3bPDqBbA6Fg3bYjhts9iZBk1pe9gVItgdAoeBpWI1d9bdChJwHH6BImdQyT30thPpHCwm8Je/AiJ7STtiZ45PkU+L9GdyNwSakrthcBGOXBtZZsO87k8NZIqSRIkuSda8T1fqLlcnu4szC+hutROc2igjhUQ3UhgJ7oP94sAhqwzGLaGMdwRxmhnGD7bF0zYZjFmDcFrDcHXGYLvdQDTXWHkMqf48X0ZVSUk0ANGqxDQyIr4G91FdDWOtvpxdDdNo5ubgo2bhL1pCiPtQYy0BeA0+eEyTYBvmgDPjWPQMonTVBaLkRVo7tihp4EVAnRKD9ZWduj100dZZNIn56ROkE5mkD7MFLWsXI9T2cI/nP8FTUmvHKgQ0VAhwtryCX3WIPo6AoV6AUdn8IpG6JW9r8x+1JfzIFkMCWtQiKi970L1XeeteFjmhlbhoRf7Bw69MFX2QwjPAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="Imagen heroku login navegador" title="Imagen heroku login navegador" src="/static/b55512f4eb78a2d242d212347d0b315d/7d769/heroku_login_navigator.png" srcSet="/static/b55512f4eb78a2d242d212347d0b315d/5243c/heroku_login_navigator.png 240w,/static/b55512f4eb78a2d242d212347d0b315d/ab158/heroku_login_navigator.png 480w,/static/b55512f4eb78a2d242d212347d0b315d/7d769/heroku_login_navigator.png 960w,/static/b55512f4eb78a2d242d212347d0b315d/f1720/heroku_login_navigator.png 1024w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:24.166666666666664%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA8klEQVQY05WPwUrDQBRF38xkJhnbKtZqAkm1tCYkZJJFbNGFbvwBNy5FEHTh/3/AkaZgt7o4cB/38ThP/OIDv3jnJP0mOX/B+Rzjck7zJbMsQ2uNMYYoikaU0r9ZRNBaxl4pNc4y3N1Tlg273QObTUnT1LRtSxsCXd8TQqCua7bbLX3fU1UVwzCMuWlKQqjpusNeURTIen3DdOIxRkicI9IWIwYlCiUarY52e1tr7cjeyjmHtW7s4jjGe488Pj1zW7ZcZUtW3YaizUhSw+w6IZlHxBeH1/7MJP0knr+RXH5xVryyrlaIFdw0QluFdupfB38ArAN3oNl3E2IAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="Imagen heroku login consola" title="Imagen heroku login consola" src="/static/1b7b21190daaa7b8bba1a510245d425b/7d769/heroku_login_shell.png" srcSet="/static/1b7b21190daaa7b8bba1a510245d425b/5243c/heroku_login_shell.png 240w,/static/1b7b21190daaa7b8bba1a510245d425b/ab158/heroku_login_shell.png 480w,/static/1b7b21190daaa7b8bba1a510245d425b/7d769/heroku_login_shell.png 960w,/static/1b7b21190daaa7b8bba1a510245d425b/62e60/heroku_login_shell.png 998w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span></undefined><p class="css-1ccrm8j">Luego ejecutar el comando:</p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-bash"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token plain">heroku create load-test-api-jp</span></div></code></pre></div><style data-emotion="css 1ioa6cd">.css-1ioa6cd{border-left-color:var(--theme-ui-colors-primary);border-left-style:solid;border-left-width:6px;margin-left:0;margin-right:0;padding-left:2rem;}.css-1ioa6cd p{font-style:italic;}</style><blockquote class="css-1ioa6cd"><p class="css-1ccrm8j">El nombre de la aplicación puede no estar disponible, pueden intentar con otro nombre</p></blockquote><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:8.333333333333332%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAd0lEQVQI133HMQ6CMBhA4ZpAlTZIBeRvaVIbqQmrg4vX8AZO3v8Cz4Q4O7x8eWpIb7rwwfkXti207kZ/WejmSFxXzCTYEDAi7KoKpdT/puXB6fpEyh0pBRcTbk70OTPmjD46DlZjfEUz1Bi/x4imOetNG34/1ptfa7YwRE5xOCgAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="Imagen heroku crear app" title="Imagen heroku crear app" src="/static/527f5d2a4ee020b4bf0fb0d8df8a4b5e/7d769/result_heroku_create.png" srcSet="/static/527f5d2a4ee020b4bf0fb0d8df8a4b5e/5243c/result_heroku_create.png 240w,/static/527f5d2a4ee020b4bf0fb0d8df8a4b5e/ab158/result_heroku_create.png 480w,/static/527f5d2a4ee020b4bf0fb0d8df8a4b5e/7d769/result_heroku_create.png 960w,/static/527f5d2a4ee020b4bf0fb0d8df8a4b5e/16398/result_heroku_create.png 1224w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span><p class="css-1ccrm8j">Antes de hacer deploy en el archivo go.mod le especificaremos a heroku que versión de go va a utilizar para evitar errores al desplegar, en el archivo go.mod al final añadimos <!-- --><code class="css-0">// +heroku goVersion go1.18</code>, quedaría así:<!-- --></p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:678px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:135.41666666666666%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEgklEQVRIx51V2XLbRhDkV9gicYO4AeK+CYI3ReqwJUuyZcl2HMlxnP//gE7tgBJlp1KVykNjZ3aA3p7dwWxvN4nQZjpGzisk/hEsYwDb0qDrxv9Cr81drGoXtq0gGGkYqgJkWYIsK1AUlaDSePB/haoOn9HLIwvnsxSG5SEMI+i6DlEQnglkRYEky1DVzn4JFmcxXhDA8Tyhxx4Djocg8JAkCXFWIEoLhHGKPE0IaRQiSxKkcYQy6+byJEaVZ6jzDIY2hDFUCT1BEGh1yzQgqTpG80t47Tn0sMI09rAuYpzUKZpohGUeElZFhFUe4XScYlPEWOYRzpscuzrtCFl6tm2D5zgIgz54Jp/jKRUWp1EUn+2X4Pif/WdCplDWLDjlCoGlY10mcA2NPpAkEaL43/BCoQVBUiAbHhRJhKUNIYkiOI4j5Z1qrvN5/l9BhOwwWJkwAlNTYegaVFWBrmu0FY5j0+kzm8GyLALZpgn7ybbtjlCWZQyHrAQUxPUUUTWFHebIihJxHMN1PRiGCW80Ili0iAvHdWE7Ds2NWMx1nlJWu0MRJdjlGlF7grBaYOSHVApDWYKuKjCYakUmW1Pkzt/brHZ5WTvsoeM4GAwG8HUJH+cZbucZzuoYp+MEH1djfFhWuF83uF3V+LCs8X5REa7mJW6XFeokhNvsnghlGKYJSeCwTC087Go8bGt8XKS4W6R42Fb4sinwdVPgcVvhdpHgcVfh8yrH3TLFeROimkzRLjaHwmZ7IgocVqmJ76djwv0yI3w/GePbrsYf+/HLOqc5Rvq4LXE1CVA2LSbt9HAobKMZ4SI2SNHvxyVu5wmB+V+PS/y2KQg3s5j8+1WGd22IyXSG8aTFZL5Ej9WOaRh0Yoxwk5n483SMH2cNPq8yUvPXWUNzTNG3XUWp/zgbU/p3ywwnbY52XKKpMvRYofq+D98PwHEDlCMDn9Y17lYlLtsEb5oY96sKnzc1buY54Xqa4f08x4dFgetZjqsmQB6HVHKksCteB0f9ARxDx+W0xLtZhXUZY1ulZJ+MM1y0Jd4vxriYljiuEtwsalzPaxrHkQ8znXYKXdelwmSEnqnTC1ezCtsqwaaMaYGzJsPbtsCbSb5fsKSRvce6zuWsxPWs/Ceha3YKL6YFKWRKGBFrYWdN/tymzic5gcWqKICetHCLxc8p9wcDeJZOaTAwMvYxU8GUXZCiEhdNghu2d21G+/m2CqC5EVQn7BR6nocg8PH6qA9H1yhlppKlzEifUr5sC7RZgqI9Rj1Zom4WaFZvMNlew5+9peb8k0JRkhB4DqaJjzYJ0CY+6tDDPAtR+C4WWQDLtCA6MSTTg2h4kN0Y6iiHHhTQRslBIQP7Y0zTxKvXfRwNOPT3eLKP+l0/ZF1d4AYEntmDI/CEfkfI1LGDYTbrzooqP4OuVEWGMpTpn2c2u+nY3yXtYywzaY9ev99HlmWoqgqiLMCNLNihgajxEE08uLFJdjzxEFQO2U5kdrHEwii3IfDCgfCpYzPQvfDi/mBqKSZLB1+W9h1+P//LffM3yiE/9Mmuaq0AAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="Imagen go.mod" title="Imagen go.mod" src="/static/d95d25234a6bced023d24163e59f1bac/34428/go_mod_file.png" srcSet="/static/d95d25234a6bced023d24163e59f1bac/5243c/go_mod_file.png 240w,/static/d95d25234a6bced023d24163e59f1bac/ab158/go_mod_file.png 480w,/static/d95d25234a6bced023d24163e59f1bac/34428/go_mod_file.png 678w" sizes="(max-width: 678px) 100vw, 678px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span><p class="css-1ccrm8j">Y ahora solo para poder hacer deploy a heroku, iniciaremos un proyecto de git</p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-bash"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> init</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain">heroku git:remote -a load-test-api-jp</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3<!-- --></span><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 139)">.</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4<!-- --></span><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Make it better :fire:&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5<!-- --></span><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> push heroku master</span></div></code></pre></div><p class="css-1ccrm8j">Esto iniciará el deploy y al final nos mostrará la url de nuestra aplicación ya desplegada</p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:47.5%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABYElEQVQoz5WSy27bMBREKVKKJOpJSqKe9UNxhDRJ23iTHymKAv3//ziF6XbjVbwYDLk5d4aXwjlH61rmw8SyLuy3HY8vK2VTIMMAIcR90jrzh8ylFFNG/9owvLWUU442CSqSXiL4JDBNU58kazT1XOK2hunNYfYV2qbknfb+6YR5liOUwK4VzanGvTS4r5bpvffQ9tHQPVm6zdKs5nrfLO3J4p4b2pPxQ3OXXZtcgIlO+PK0MB9H5nViOozY0ZDWia99SZiUMXHx4D2tYu//JUOJVMH1WbTWxHHM0A+4rscaS1XW6DRDBer+pdR1jbWG8/nMbr+7H3CrKIoJw4jjemQYe/I8J8syqqrCGENZllyGFkVBWde0SYwLJZWSGCV5uN3+YT+wTB1jO+NMzzwtGHMF+B8gJUop1D8Pg4BICJQQhEIQ3CZc1t8cvv3i+88TH39eef6x0diWJIk94N7KfwGDed+jBO4aoAAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="Imagen heroku deploy" title="Imagen heroku deploy" src="/static/7cba8674ec6a11076f25124acb9c101c/7d769/result_heroku_deploy.png" srcSet="/static/7cba8674ec6a11076f25124acb9c101c/5243c/result_heroku_deploy.png 240w,/static/7cba8674ec6a11076f25124acb9c101c/ab158/result_heroku_deploy.png 480w,/static/7cba8674ec6a11076f25124acb9c101c/7d769/result_heroku_deploy.png 960w,/static/7cba8674ec6a11076f25124acb9c101c/87339/result_heroku_deploy.png 1440w,/static/7cba8674ec6a11076f25124acb9c101c/13e26/result_heroku_deploy.png 1630w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span><p class="css-1ccrm8j">si abrimos en el navegador nos mostrará el resultado que configuramos para el endpoint raíz</p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:932px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:26.666666666666668%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAtklEQVQY063Lyw7BUBCA4fMAtHV0gaSqVdQCIS6pS0Ks3IJWlWfxKKy95i+KRGxEYvHlz0xmxKXhcqmVOTcqXL0mp8GI6WRGuArYrQKCpc9+HRIsfKJ1yNE/EG32+PMt/ZZHu9amW+/QeRJjt8zQsRkULcaVEj3bws1bVE37K9d83MZ9EoZdJFcokDEM8o6Dns2SUJIkVYXEm8/5tfskUpqGpqrcqypK3LSUSCnj/krouh4//8sN8ciKNPwL1+MAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="Imagen heroku url" title="Imagen heroku url" src="/static/8944ce0e71d20743ba7a40f86ddea0bb/9ef50/heroku_app_navegador.png" srcSet="/static/8944ce0e71d20743ba7a40f86ddea0bb/5243c/heroku_app_navegador.png 240w,/static/8944ce0e71d20743ba7a40f86ddea0bb/ab158/heroku_app_navegador.png 480w,/static/8944ce0e71d20743ba7a40f86ddea0bb/9ef50/heroku_app_navegador.png 932w" sizes="(max-width: 932px) 100vw, 932px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span><p class="css-1ccrm8j">Listo, una vez desplegada la aplicación empezamos con la parte de las pruebas por medio de k6, pero empecemos definiendo primero que es, <!-- --><a href="https://k6.io/docs/es/#:~:text=%C2%BFQu%C3%A9%20es%20k6%3F,regresiones%20y%20errores%20m%C3%A1s%20tempranamente." target="_blank" class="css-1bw77fa">la página oficial de k6 lo define así</a>:<!-- --></p><blockquote class="css-1ioa6cd"><p class="css-1ccrm8j">Grafana k6 es una herramienta de pruebas de carga de código libre que hace fácil a equipos de software testear el rendimiento de sus aplicaciones.
Con k6, puedes testear la fiabilidad y rendimiento de aplicaciones e identificar regresiones y errores más tempranamente. k6 te ayudará a construir aplicaciones rápidas y robustas que puedan escalar.</p></blockquote><p class="css-1ccrm8j">Lo primero será instalar el cli k6, podemos ver <!-- --><a href="https://k6.io/docs/es/empezando/instalacion/" target="_blank" class="css-1bw77fa">aquí las instrucciones de instalación</a></p><p class="css-1ccrm8j">Una vez instalado el cli, veremos la forma más rápida de ejecutar una prueba rápida de k6 utilizando un paquete de npm llamado <!-- --><a href="https://www.npmjs.com/package/@apideck/postman-to-k6" target="_blank" class="css-1bw77fa">postman-to-k6</a> este convierte una colección existente de postman a un script de k6 para correrlo como prueba de carga, lo primero será abrir postman, crear una colección nueva y configurar un llamado a nuestro endpoint de la api anteriormente construida<!-- --></p><p class="css-1ccrm8j">Nos logeamos y copiamos el token de respuesta</p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:34.583333333333336%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABFklEQVQoz1WRXU7EMAyEew6QaGo7P07Sbmn7hBCnQOytuPIge7fAPoycOPHniTMs84zWGlJKKKUg5+xRVSEiEImIMfqaiMDMLttbrLVBNSMvb1g/vjBcLjOO44BqdUhrHb13zPOM123Dtm/Yjx3LsqDWitqqNzQD1iimDKEXtPcrLp/fGLTeQH54V8nJnVqRluyy/ZmbpgkhhF/XIUyYxmdIeMJwQs6OrXes64pxHL1oHIMXmDt7ouUMaKD/OWZBUcVgoFPW0WZ6HLu7ife8FbkzIoeZrDlHAQtDLMYCkvwItEv2fJvXbZ4VvVVUVWhOYKLbxxBBzs9h9txE7PN8AJroXuTw9KeaE1IURGEkYY+nyGc6OvwHjODLP7UiUCYAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="Imagen postman login" title="Imagen postman login" src="/static/f23b544435d507462921645483fdc9be/7d769/postman_collection_k6.png" srcSet="/static/f23b544435d507462921645483fdc9be/5243c/postman_collection_k6.png 240w,/static/f23b544435d507462921645483fdc9be/ab158/postman_collection_k6.png 480w,/static/f23b544435d507462921645483fdc9be/7d769/postman_collection_k6.png 960w,/static/f23b544435d507462921645483fdc9be/87339/postman_collection_k6.png 1440w,/static/f23b544435d507462921645483fdc9be/88b03/postman_collection_k6.png 1920w,/static/f23b544435d507462921645483fdc9be/88eec/postman_collection_k6.png 2618w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span><p class="css-1ccrm8j">Hacemos una petición de usuarios enviando el token anterior</p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:39.166666666666664%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABGUlEQVQoz42R2W3DQAxEVUgA70FyuYdkK/ZHCkgJKSLFpOcJSB1w4J98PBDcpWZGy+n+uGNdV9Rand47amsY84zlumBZNuy8lIKiZatFNlQhFLF8fuP29YNpjOFCRbZBEYGK4DoaWm9QVb9vrfm9VoVIQc6ETIScM3JK4LqA5w9MzIxnNvfiAmPM/oGa0C5cVaG1o/YFtc9niJwCwuUNkzUHJugJ20CpA1waiAUpJVxCQAjRq82ZoWFPwSwIISDG+CrYqv2aQszZUEUmBhEjZXLMhKWARE5YB6j0V8F5DF/CuYB9CcLkKY4kljomq3Hrc3bTP4KGD8YIqc172vtD6CDsT+DnR43hVZCIkGLEWB94v91w7Xqa/IdfHITnedQqD6YAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="Imagen postman get users" title="Imagen postman get users" src="/static/7096be294d6e6c8bec9d57c2f1b76bdb/7d769/postman_users_get.png" srcSet="/static/7096be294d6e6c8bec9d57c2f1b76bdb/5243c/postman_users_get.png 240w,/static/7096be294d6e6c8bec9d57c2f1b76bdb/ab158/postman_users_get.png 480w,/static/7096be294d6e6c8bec9d57c2f1b76bdb/7d769/postman_users_get.png 960w,/static/7096be294d6e6c8bec9d57c2f1b76bdb/87339/postman_users_get.png 1440w,/static/7096be294d6e6c8bec9d57c2f1b76bdb/88b03/postman_users_get.png 1920w,/static/7096be294d6e6c8bec9d57c2f1b76bdb/8ef1b/postman_users_get.png 2616w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span><p class="css-1ccrm8j">Le añadí un test al endpoint para ver si respondió status 200 y si recibió data</p><div class="gatsby-highlight" data-language="javascript"><pre class="prism-code language-javascript" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-javascript"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token plain">pm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Status code is 200, and have data&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain">    pm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">to</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">have</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">status</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3<!-- --></span><span class="token plain">    pm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">expect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">pm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">to</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">gt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4<!-- --></span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></code></pre></div><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:33.75%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABHUlEQVQoz32Q4VLDIBCEeZJwCYFAmkAI1JB2qra1+v5PtA7EqqOOP765ZVmOA9b3PZRS6LoOWe92u1/cfWNMyf0HCyFAa10OxBixriuWZUFKC9Y1lXVKqeC9L03zBblu2nx6GZa7Nk0D3WlI1YELghBt0RURRCPAqUbbypLJeSEEnBshtYRS22ScE4gITEoJ5x2mMGN5mDCHAbMfEOMAP/eIwSHMAyZnMFiL0Xu4yeIQLYZeQWsFY/KXyQJr2xb7vcf5esTtLeFyOeL19ozrywGns8X56RHXywlpmZBWjzlMcK7HaA3GUcOOZsNusDx+pzU45+BUldHrugZRDU5U/Kyzl8n7VcW3PKeP+gXL776H72zed59QE+Gv7E/eAe92zykS+zS1AAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="Imagen postman get users test" title="Imagen postman get users test" src="/static/cb98d6db37ce4b17b0999c06fcf65fd9/7d769/postman_users_get_test.png" srcSet="/static/cb98d6db37ce4b17b0999c06fcf65fd9/5243c/postman_users_get_test.png 240w,/static/cb98d6db37ce4b17b0999c06fcf65fd9/ab158/postman_users_get_test.png 480w,/static/cb98d6db37ce4b17b0999c06fcf65fd9/7d769/postman_users_get_test.png 960w,/static/cb98d6db37ce4b17b0999c06fcf65fd9/da1d8/postman_users_get_test.png 1308w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span><p class="css-1ccrm8j">Exportamos la colección</p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:614px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:218.75%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAsCAYAAABloJjNAAAACXBIWXMAABYlAAAWJQFJUiTwAAADbElEQVRIx6WW7XLaPBCFuZMWbBmMPzEYQyBAQkKTwLTTTqbzvvd/IafzaCLGpRiH5MdBYiWvjlZ7Vurkea4kSTQej3Vzc6OyLFVVlZy9DaPRyM7NskxRFKmDASf39/fa7/d6fnrW/rDXbDZTmqZ2chMYX61Wms/nlgz/O+4j2jRPNZoVmlUzDYdDBUEgY4z6/f5ZDAYDOwfwPwxDdaAN3SROFKWx0jLTYrGwg6wOaxbzPO+4QB3O5px2+GHvbHu73Wp7v7UxxAEMYMocx+QS+KZDhw9hQRyIB84ZJK4swi7c1t/lkMm+76vX6x2BDeYsRL/b7Vo781odnsItcHt7a9kS07u7O/ufA2xy2uiQD4BLj8lkoul0ap3D2h3C1Q6JKc7YLpPBh7bsHMIIhsSuzdm7YlgUhXUKS1IJeTZt910OccK2AYeCHD91yigIrQP6n9oygzBbr9cWJLmzfyht+NiVKHSNSlypwvahLW82Gz08PGi5XFpJPj4+2liS6CxwekCtDEli2KF116dYuPGr85C4wRBGsKNPsTjHzsX3IkOY1etevfY1HWRrcaDA7nY7GzsYsu0PabmJ2an9qhiSzMgOCQLSBvlhO8e0laGr0O5SOu1fzRBWsHESpE/bdDitDOtX5Kdi6FKAU0Yt9TwE7p65esuoA92iDvsQeANjVPGrGcIMlq5F0/RRC9q+2mEcx8dnCpXbXVS02OsiaJWeu6QcOBh3N7s7xsmTLLjM8M1h/fq0DyNysz73LVfjKLL2iww9Y5ShjLK0yIvC2nzGTWBb/gf9gYZxbP/3LjmMjK/1tNS39Vq71a02s0qJ8ZX1A6VBoCygNRqFA1VZau3mnMNeEGhsPP2fhPo9r/TffKrXSaF9HOpHnuhHVkOe6HsW65BGes1jvfT9fx12g0CV8fSSDG0S/zrstVncaJwmKtJEZZ6pzPO/MMlzLUa5DuccGqTm+3rs+3otMv3MYotfeaLf5UiHaKCX0GgfBke8hIEOYaDCb4qhMfrieVptt7rb7bR9elK1XNo2iCJ9QSkm0FcLc0T30qGQEqSPBQ8l8g+5vaVOHQNKGt+95zlHDlJMXdU5VRQ298Bvv6R46duCevlycgu1OlyVYz0v56pG+cVXFztBSa3Fwfe9owzdg7MNnaZVT524uJ6DG4fIH+lfHsQs9G5NAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="Imagen postman export" title="Imagen postman export" src="/static/3de3d2867e7dd80475c91c7658d8a2ce/328b5/export_postman_collection.png" srcSet="/static/3de3d2867e7dd80475c91c7658d8a2ce/5243c/export_postman_collection.png 240w,/static/3de3d2867e7dd80475c91c7658d8a2ce/ab158/export_postman_collection.png 480w,/static/3de3d2867e7dd80475c91c7658d8a2ce/328b5/export_postman_collection.png 614w" sizes="(max-width: 614px) 100vw, 614px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span><p class="css-1ccrm8j">Desde una consola nos situamos en el directorio donde exportamos la colección e instalamos globalmente el paquete de npm postman-to-k6</p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-bash"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> i -g @apideck/postman-to-k6</span></div></code></pre></div><p class="css-1ccrm8j">y ejecutamos el comando</p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-bash"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token plain">postman-to-k6 k6Tutorial.postman_collection.json -o k6-script.js</span></div></code></pre></div><p class="css-1ccrm8j">Esto tendrá como resultado un archivo javascript y un folder &quot;libs&quot; donde hay una serie de archivos que utilizará k6 para ejecutar la prueba de carga sobre nuestra colección</p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:14.583333333333334%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAArElEQVQI11WHy07CUBQAzzn3gbe5rd6mpVAiUTBxzWeYwM6Nv2BIQGL8/TElLHQxmRmZP3/SPx2Zb44M2y+GzZnFyzcP3Q5VRcRQ57HgMf/X4drqHHp7NUPK44l2faFZncjLC3l5Jo8/xLzDQouGjllZUA0jqZ+8InXDtSf7qiI2DbNS8CkhZXynX3+Q2j2W33AT9YG2f8VCxKWCxRqL91hobtSI3qGaEJF//AIkqEnwK43ZeAAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="Imagen postman to k6" title="Imagen postman to k6" src="/static/d8ba95a894c6b0bc2b343b1848493e3e/7d769/result_postman_to_k6.png" srcSet="/static/d8ba95a894c6b0bc2b343b1848493e3e/5243c/result_postman_to_k6.png 240w,/static/d8ba95a894c6b0bc2b343b1848493e3e/ab158/result_postman_to_k6.png 480w,/static/d8ba95a894c6b0bc2b343b1848493e3e/7d769/result_postman_to_k6.png 960w,/static/d8ba95a894c6b0bc2b343b1848493e3e/4f7ef/result_postman_to_k6.png 1404w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span><p class="css-1ccrm8j">Por ultimo ejecutamos la prueba usando el cli de k6 con el siguiente comando</p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-bash"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token plain">k6 run --vus </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> --duration 30s k6-script.js</span></div></code></pre></div><p class="css-1ccrm8j">Este comando ejecutará una prueba de carga con 200 usuarios virtuales con una duración de 30 segundos (siempre se ejecuta durante unos segundos mas, mientras configura la ejecución de la prueba), y nos mostrará el resultado de la prueba</p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:77.91666666666667%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACP0lEQVQ4y52U246jOBiEicGADbY5mUATQtI5Tma65xlmtbtaaaV9/7f5VhB191UfNBelwhcU5f+zCSL7F9L+TVz+S1z9R5Q/EemU2DqSoiCt6sWV96R1TSAEQRC8r0gJRBQw+yIdE6xWH7/0cWBGmChkZpC5XZpFWr+Fzv6irwRO04RpW6RzrKLo95u9aDdNOO9RdYOaZ+UcqbUkxr6uZ5dZRqQUsTHL87uNQyGwzuHKkqIsqZqGoqowzlE1nrKuKWYwWiOiCCHl4u82bLuOpvXU3tOuuyXUty1t29I0DX3f45sGay1aqc+37GRIk0jaNKZJY4okpoglMhREYYiUcvHVV6E0zmJjSSZWKLEiCgJkkhAqTRCGb6S/CuXb7cbpfFnm9jKbvKqpzxfsZkQZgxACbcwSrPN8gZPnOUmWobVGueJ+1ObA/X7P7XbjcrlQOEcYhlRlyXD7TjkM9I+PWO/ZHI9IrRkfD5jtxOF0wu8fmfZ7+us3kqp+O4fPz89cr1eKoiBJEsqmobteUVmOnyZs19OOI3oGNwwo3y6wqnFLvxkpH4a3K3k4HJZ2x+NxoTpvbw7ur1eq7Zb1boc2luF4Is4Nw36PXndMux31dstmHFmfz0R5fg+83X7w9PSTYRjJMoNYCcq5yemM8Z714YDxLX7YkBYFvu9J64au63Drjna9pnh4QMTJPXB4qHE2JRQBQtxJzbcktneFSiHznNVnf5kXGf8Psf2FNH8Q5n/iqieSNCIQ4Sv1169/Qf8DWv5nri/jM4oAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="Imagen k6 run" title="Imagen k6 run" src="/static/e3fa4dd3d0785ab438215f7c8efc6a44/7d769/k6_run_postman_collection.png" srcSet="/static/e3fa4dd3d0785ab438215f7c8efc6a44/5243c/k6_run_postman_collection.png 240w,/static/e3fa4dd3d0785ab438215f7c8efc6a44/ab158/k6_run_postman_collection.png 480w,/static/e3fa4dd3d0785ab438215f7c8efc6a44/7d769/k6_run_postman_collection.png 960w,/static/e3fa4dd3d0785ab438215f7c8efc6a44/87339/k6_run_postman_collection.png 1440w,/static/e3fa4dd3d0785ab438215f7c8efc6a44/b1797/k6_run_postman_collection.png 1704w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span><p class="css-1ccrm8j">En la salida podemos ver los resultados de la prueba ejecutada e incluso del test que definimos en postman, explicaré lo que entiendo de los mas relevantes del listado</p><p class="css-1ccrm8j">Las letras en rojo son el resultado del test que definimos en postman para cada petición, para este caso 24 de las peticiones trajeron 0 usuarios (no fallaron, solo no trajeron usuarios) y en el test preguntamos si la longitud del array de respuesta era mayor a 0, por eso salen 24 test fallidos.</p><blockquote class="css-1ioa6cd"><p class="css-1ccrm8j">http_req_duration..............: avg=2.28s    min=85.7ms  med=1.44s    max=44.57s   p(90)=4.48s p(95)=7.28s</p></blockquote><p class="css-1ccrm8j">En este resultado podemos observar el promedio del tiempo de respuesta por petición, tiempo mínimo, medio y máximo y los porcentajes de los tiempos de respuesta de los 90%, 95%</p><blockquote class="css-1ioa6cd"><p class="css-1ccrm8j">http_req_failed................: 0.00%  ✓ 0         ✗ 2712</p></blockquote><p class="css-1ccrm8j">Este resultado puede ser un poco confuso (para mí) podríamos entender de las peticiones todas fallaron, pero las que salen con ✓ son las que fallaron y las que salen con ✗ son las que no fallaron, en este caso son 2712 peticiones exitosas, 0.00% de porcentaje de fallos</p><blockquote class="css-1ioa6cd"><p class="css-1ccrm8j">http_reqs......................: 2712   51.210708/s</p></blockquote><blockquote class="css-1ioa6cd"><p class="css-1ccrm8j">iteration_duration.............: avg=2.41s    min=86.4ms  med=1.55s    max=44.58s   p(90)=4.8s  p(95)=7.37s</p></blockquote><blockquote class="css-1ioa6cd"><p class="css-1ccrm8j">iterations.....................: 2712   51.210708/s</p></blockquote><p class="css-1ccrm8j">Estas 3 nos dicen la cantidad de peticiones totales, el promedio de tiempo de respuesta por petición, el tiempo mínimo, medio y máximo y los porcentajes de los tiempos de respuesta de los 90%, 95%, y la cantidad de peticiones por segundo que para este caso fueron 51.210708 peticiones por segundo.</p><p class="css-1ccrm8j">Esta fue una prueba sencilla y rápida de ejecutar construida desde un test que definimos para una colección en postman, pero vayamos a un escenario donde debemos construir los tokens desde una base de usuarios (json) obtener ese token y luego utilizarlo para realizar aparte la petición a nuestra api (incluso obtener mas datos del usuario), para esto construiremos ya un proyecto un poco mas estructurado como ejemplo.</p><p class="css-1ccrm8j">Lo siguiente que haremos es crear un proyecto de nodejs, ya que k6 aunque internamente funciona con Golang, la lógica que escribimos para los test lo hacemos utilizando javascript (aunque typescript para este ejemplo), lo que para mi lo hace mas rápido de aprender y su curva de aprendizaje es menor, entonces iniciamos el proyecto de nodejs e instalaremos algunas dependencias</p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-bash"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> init -y</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> i k6</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3<!-- --></span><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> i -D @babel/cli @babel/core @babel/node @babel/plugin-proposal-class-properties @babel/plugin-proposal-decorators @babel/plugin-proposal-object-rest-spread @babel/preset-env @babel/preset-typescript @types/k6 @types/node babel-loader terser-webpack-plugin webpack webpack-cli</span></div></code></pre></div><p class="css-1ccrm8j">Como anteriormente mencionamos este es un caso en el que necesitamos primero obtener los tokens de los usuarios de acuerdo a una base de usuarios (json) previamente definida y luego si utilizar estos para hacer la prueba, entonces lo que haremos será construir dos archivos: uno para el test y otro para la base de usuarios.</p><div class="gatsby-highlight" data-language=""><pre class="prism-code language-" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token plain">* src/seed.ts</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain">* src/test.ts</span></div></code></pre></div><p class="css-1ccrm8j">Previo a escribir estos archivos configuramos 3 archivos necesarios para poder usar typescript:</p><div class="code-title"><div>.babelrc</div></div><div class="gatsby-highlight" data-language="text"><pre class="prism-code language-text" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name=".babelrc: copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">.babelrc: copy code to clipboard</span></button><code class="language-text"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token plain">{</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain">  &quot;presets&quot;: [</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3<!-- --></span><span class="token plain">    [</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4<!-- --></span><span class="token plain">      &quot;@babel/typescript&quot;</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5<!-- --></span><span class="token plain">    ]</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6<!-- --></span><span class="token plain">  ],</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7<!-- --></span><span class="token plain">  &quot;plugins&quot;: [</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8<!-- --></span><span class="token plain">    &quot;@babel/proposal-object-rest-spread&quot;,</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9<!-- --></span><span class="token plain">    [</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">10<!-- --></span><span class="token plain">      &quot;@babel/plugin-proposal-decorators&quot;,</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">11<!-- --></span><span class="token plain">      {</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">12<!-- --></span><span class="token plain">        &quot;legacy&quot;: true</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">13<!-- --></span><span class="token plain">      }</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">14<!-- --></span><span class="token plain">    ],</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">15<!-- --></span><span class="token plain">    [</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">16<!-- --></span><span class="token plain">      &quot;@babel/plugin-proposal-class-properties&quot;,</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">17<!-- --></span><span class="token plain">      {</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">18<!-- --></span><span class="token plain">        &quot;loose&quot;: true</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">19<!-- --></span><span class="token plain">      }</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">20<!-- --></span><span class="token plain">    ]</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">21<!-- --></span><span class="token plain">  ]</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">22<!-- --></span><span class="token plain">}</span></div></code></pre></div><hr class="css-1xhzgp9"/><div class="code-title"><div>tsconfig.json</div></div><div class="gatsby-highlight" data-language="json"><pre class="prism-code language-json" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="tsconfig.json: copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">tsconfig.json: copy code to clipboard</span></button><code class="language-json"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain">  </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;compilerOptions&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3<!-- --></span><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;experimentalDecorators&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4<!-- --></span><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Target ECMAScript.</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6<!-- --></span><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;target&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;ES6&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7<!-- --></span><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Search under node_modules for non-relative imports.</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9<!-- --></span><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;moduleResolution&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;node&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">10<!-- --></span><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Process &amp; infer models from .js files.</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">11<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">12<!-- --></span><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;allowJs&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">13<!-- --></span><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Don&#x27;t emit; allow Babel to transform files.</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">14<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">15<!-- --></span><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;noEmit&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">16<!-- --></span><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Enable strictest settings like strictNullChecks &amp; noImplicitAny.</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">17<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">18<!-- --></span><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;strict&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">19<!-- --></span><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Disallow features that require cross-file information for emit.</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">20<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">21<!-- --></span><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;isolatedModules&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">22<!-- --></span><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Import non-ES modules as default imports.</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">23<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">24<!-- --></span><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;esModuleInterop&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">25<!-- --></span><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;skipLibCheck&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">26<!-- --></span><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;noImplicitThis&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">27<!-- --></span><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;strictNullChecks&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">28<!-- --></span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">29<!-- --></span><span class="token plain">  </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;include&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">30<!-- --></span><span class="token plain">    </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;src&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">31<!-- --></span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">32<!-- --></span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></code></pre></div><hr class="css-1xhzgp9"/><div class="code-title"><div>webpack.config.js</div></div><div class="gatsby-highlight" data-language="javascript"><pre class="prism-code language-javascript" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="webpack.config.js: copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">webpack.config.js: copy code to clipboard</span></button><code class="language-javascript"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> path </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;path&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token maybe-class-name">TerserPlugin</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;terser-webpack-plugin&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4<!-- --></span><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5<!-- --></span><span class="token plain">    </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">resolve</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6<!-- --></span><span class="token plain">        </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">extensions</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;.ts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7<!-- --></span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8<!-- --></span><span class="token plain">    </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">mode</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;production&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9<!-- --></span><span class="token plain">    </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">entry</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">10<!-- --></span><span class="token plain">        </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">seed</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;./src/seed.ts&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">11<!-- --></span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">12<!-- --></span><span class="token plain">    </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">optimization</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">13<!-- --></span><span class="token plain">        </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">minimize</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">14<!-- --></span><span class="token plain">        </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">minimizer</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">TerserPlugin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">15<!-- --></span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">16<!-- --></span><span class="token plain">    </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">output</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">17<!-- --></span><span class="token plain">        </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">path</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">resolve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;dist&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">18<!-- --></span><span class="token plain">        </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">libraryTarget</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;commonjs&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">19<!-- --></span><span class="token plain">        </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">filename</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;[name].js&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">20<!-- --></span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">21<!-- --></span><span class="token plain">    </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">module</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">22<!-- --></span><span class="token plain">        </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">rules</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">23<!-- --></span><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">24<!-- --></span><span class="token plain">                </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">test</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\.ts$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">25<!-- --></span><span class="token plain">                </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// exclude: /node_modules/,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">26<!-- --></span><span class="token plain">                </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">loader</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;babel-loader&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">27<!-- --></span><span class="token plain">                </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">options</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">28<!-- --></span><span class="token plain">                    </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">presets</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;@babel/typescript&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">29<!-- --></span><span class="token plain">                    </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">plugins</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">30<!-- --></span><span class="token plain">                        </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;@babel/proposal-class-properties&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">31<!-- --></span><span class="token plain">                        </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;@babel/proposal-object-rest-spread&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">32<!-- --></span><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">33<!-- --></span><span class="token plain">                </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">34<!-- --></span><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">35<!-- --></span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">36<!-- --></span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">37<!-- --></span><span class="token plain">    </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">stats</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">38<!-- --></span><span class="token plain">        </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">colors</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">39<!-- --></span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">40<!-- --></span><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// target: &#x27;web&#x27;,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">41<!-- --></span><span class="token plain">    </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">externals</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">k6(\/.*)?</span><span class="token regex regex-delimiter">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">42<!-- --></span><span class="token plain">    </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">devtool</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;source-map&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">43<!-- --></span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></code></pre></div><hr class="css-1xhzgp9"/><p class="css-1ccrm8j">Teniendo estos tres archivos creados, procedemos a crear nuestro archivo json que usaremos como base para obtener los tokens (agregaré en total 100 usuarios, pero lo simplificaré)</p><div class="code-title"><div>data.json</div></div><div class="gatsby-highlight" data-language="json"><pre class="prism-code language-json" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="data.json: copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">data.json: copy code to clipboard</span></button><code class="language-json"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3<!-- --></span><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;user&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;test1&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4<!-- --></span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5<!-- --></span><span class="token plain">  ...</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6<!-- --></span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7<!-- --></span><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;user&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;test100&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8<!-- --></span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9<!-- --></span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></div></code></pre></div><p class="css-1ccrm8j">En este punto vale la pena mencionar que k6 cuenta con una serie de <!-- --><a href="https://k6.io/docs/extensions/" target="_blank" class="css-1bw77fa">extensiones</a> que nos ayudan en el desarrollo de nuestra prueba, como para nuestro caso necesitamos guardar un archivo con los tokens ya generados por cada usuario para posteriormente utilizarlo en el test, para este tutorial utilizaremos una <!-- --><a href="https://github.com/avitalique/xk6-file" target="_blank" class="css-1bw77fa">extensión para escribir un archivo</a>, muy parecido a lo que hace el paquete &quot;fs&quot; de node, para poder usar algunas extensiones de k6 necesitamos instalar un <!-- --><a href="https://github.com/grafana/xk6" class="css-1bw77fa">builder de paquetes para k6 (xk6)</a> que nos ayudará con la extensión que necesitamos ahora, para instalarlo usaremos el comando:<!-- --></p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-bash"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token plain">go </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> go.k6.io/xk6/cmd/xk6@latest</span></div></code></pre></div><p class="css-1ccrm8j">y luego para instalar la extensión</p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-bash"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token plain">xk6 build v0.36.0 --with github.com/avitalique/xk6-file@latest</span></div></code></pre></div><blockquote class="css-1ioa6cd"><p class="css-1ccrm8j">En caso de error (como me sucedió a mi) <!-- --><a href="https://community.k6.io/t/unable-to-locate-xk6-after-installing-it/1866/3" target="_blank" class="css-1bw77fa">esto me ayudó a solucionar el error</a></p></blockquote><p class="css-1ccrm8j">Los anteriores comandos instalarán la extensión file y construirán un binario que será el que usaremos para correr la prueba y usar la extension, una vez corrido los comandos dará una salida como esta</p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:41.66666666666667%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABTUlEQVQoz2WR2W6DMBBFUVZIwhKWAIVQiLENGBrxJe3//8ytZiKo2j4czXgkH117rFp9oRSfKOoZtZK4C4G7lMibB5KiQJLniLMMrufhfD6vOI6Dy+XCvWVZPzw/OoxGwgwaQ99DkSxN4bku4ihifM/jyySxbXtlv9//lhFtK9H1A4Ro0XUdpFLQukNd14hI5vssooTH45ElxOFwwHa7/S/s+x7jOGIYBhhjwGdjWF6+t8juElFaIXl7wPVDOI69ikm6pN5sNi/hNE1QSkFKyVVrDSEEmqbhnmZVVfHsdrvher2yZElKchKvCed5XpOZJVlZIk1TZFnGEno2VRLtdjsWEEtSmi1zS2sJIRoI8eAUlJT+L89zFEXBcqpLT/M4jpEkCROGIZ9Pp9NrSUE8wY+fCKMSvu8iDCO4rsup6HkEXQqCgJdE2/71Z3/4BhhAxQi77pt5AAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="resultado xk6" title="resultado xk6" src="/static/710d71ef3d545074411290535c3c6b59/7d769/install_k6_file.png" srcSet="/static/710d71ef3d545074411290535c3c6b59/5243c/install_k6_file.png 240w,/static/710d71ef3d545074411290535c3c6b59/ab158/install_k6_file.png 480w,/static/710d71ef3d545074411290535c3c6b59/7d769/install_k6_file.png 960w,/static/710d71ef3d545074411290535c3c6b59/87339/install_k6_file.png 1440w,/static/710d71ef3d545074411290535c3c6b59/88b03/install_k6_file.png 1920w,/static/710d71ef3d545074411290535c3c6b59/40737/install_k6_file.png 2216w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span><p class="css-1ccrm8j">Luego nuestro archivo seed.ts importamos la extensión instalada, el paquete http que viene dentro de k6, declararemos una variable para el password que definimos, y recorreremos uno por uno los usuarios para obtener su token, lo guardamos en un array y al final esto lo guardamos en un nuevo archivo json, quedará con el siguiente contenido:</p><div class="code-title"><div>src/seed.ts</div></div><div class="gatsby-highlight" data-language="typescript"><pre class="prism-code language-typescript" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="src/seed.ts: copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">src/seed.ts: copy code to clipboard</span></button><code class="language-typescript"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// @ts-ignore</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> file </span><span class="token keyword" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;k6/x/file&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3<!-- --></span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> http </span><span class="token keyword" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;k6/http&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5<!-- --></span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEFAULT_PASSWORD</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;admin&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7<!-- --></span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> data </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;../data.json&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8<!-- --></span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> resultDataFile </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;resultData.json&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">10<!-- --></span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">setup</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">11<!-- --></span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> authData</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">any</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">12<!-- --></span><span class="token plain">  data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">userData</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">any</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">13<!-- --></span><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> user </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> userData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">14<!-- --></span><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> resp </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">post</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;https://load-test-api-jp.herokuapp.com/login&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">15<!-- --></span><span class="token plain">      user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">16<!-- --></span><span class="token plain">      password</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">DEFAULT_PASSWORD</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">17<!-- --></span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">18<!-- --></span><span class="token plain">    userData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">token </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;</span><span class="token builtin" style="color:rgb(130, 170, 255)">any</span><span class="token operator" style="color:rgb(127, 219, 202)">&gt;</span><span class="token plain">resp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">token</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">19<!-- --></span><span class="token plain">    authData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">userData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">20<!-- --></span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">21<!-- --></span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">22<!-- --></span><span class="token plain">    file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">writeString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">resultDataFile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">stringify</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">authData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">23<!-- --></span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">24<!-- --></span><span class="token plain">    </span><span class="token builtin" style="color:rgb(130, 170, 255)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">25<!-- --></span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">26<!-- --></span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">27<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">28<!-- --></span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">default</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></code></pre></div><p class="css-1ccrm8j">En nuestro package.json definiremos 3 scripts</p><div class="gatsby-highlight" data-language="json"><pre class="prism-code language-json" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-json"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token property" style="color:rgb(128, 203, 196)">&quot;scripts&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain">  </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;seed&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;npm run build &amp;&amp; ./k6 run ./dist/seed.js&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3<!-- --></span><span class="token plain">  </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;test&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;npm run build &amp;&amp; ./k6 run ./dist/test.js&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4<!-- --></span><span class="token plain">  </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;build&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;webpack&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5<!-- --></span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></code></pre></div><p class="css-1ccrm8j">y corremos el proceso de seed con el comando</p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-bash"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> run seed</span></div></code></pre></div><p class="css-1ccrm8j">esto generará el archivo resultData.json con los tokens generados por cada usuario, adicionalmente podríamos guardar cualquier otra info necesaria para posteriormente usarla en la prueba</p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:68.75%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACA0lEQVQ4y31T2XLbMAzUX7SxDh4SSV0kdViS09hJm7r5/z/aDijLcmbaPOyAgEhoiV1Gxih41yCXAkopCClxiBPESYo4Se5IkvSOLY/v+VpL0xSREBKCMbjjCa5tsdgKjVGodYFmg1EwRY5SraBvFCtVoKJcFaEmOaeGApILzOOAuXN4HRwug8NLb/E6Opx7G/LQpFib0HprVKm9lguOSEqJQuTQtYWiDypHlmWfkGYZGMvAGfsSLMsQcc5Dcj5fcFkmfCw9/iwD3qcOH6cB17nH77lHV5uAvjYYmjKsKW752JTQuUSU5zm0VMg5h+QZBGcrqzTdGaZpEOr7IcbTIf5nJJA4kdI6MJzOPzEfR/w6Oky2DljcHl2p0VXmE7P+gSlBbQwLUcDXFbq6hK/07WrrNdbDZVCQfkw3+B9ozpHWGlJI9MsLOu/w7Bu0pUZr1B221KuqelWz3Wx1i9u+oDIxzIXE6C1G22C2NU6+wXPXrvBrNIVEIUUY/CPUw5pYRsaYYBtje9A8rVFgNwuEyFbL0GZi8BVoJIEhHZ7nBW/LhOvcBdsQyC7vcxcs5CsThKFIgvibQPvMDZQUiOj9Kqkggm0YOGdI0jRYZX+zCZ7i3R7fDof7+rFG+4IoRHV+u2KZJlwnj5Nvg11ofotr8KNrg+JUm4ONGky2usU1p7nT0/wLPveVfZ7NVAoAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="resultado seed" title="resultado seed" src="/static/492963e5598e87eb1e8b37b7fb17fd6f/7d769/result_data_json.png" srcSet="/static/492963e5598e87eb1e8b37b7fb17fd6f/5243c/result_data_json.png 240w,/static/492963e5598e87eb1e8b37b7fb17fd6f/ab158/result_data_json.png 480w,/static/492963e5598e87eb1e8b37b7fb17fd6f/7d769/result_data_json.png 960w,/static/492963e5598e87eb1e8b37b7fb17fd6f/87339/result_data_json.png 1440w,/static/492963e5598e87eb1e8b37b7fb17fd6f/fe10e/result_data_json.png 1770w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span><p class="css-1ccrm8j">Como resultado tendríamos un archivo listo para ahora proceder a ejecutar nuestra prueba, por lo que procedemos ahora a crear un archivo para ejecutar el test.</p><p class="css-1ccrm8j">Los archivos para k6, como pudimos tal vez observar en el archivo seed.ts se componen de una función setup que se ejecuta antes de nuestro test y una función exportada por defecto que es la que en teoría se encarga de ejecutar nuestras pruebas, pero además de esto podemos definir ciertas opciones para ejecutar nuestra prueba con distintos escenarios, k6 cuenta con una serie de &quot;ejecutores&quot; (<!-- --><a href="https://k6.io/docs/es/usando-k6/escenarios/executors/" target="_blank" class="css-1bw77fa">executors</a>) que nos ayuda a definir estos escenarios y no tener que definir en el comando de ejecución cuantos usuarios virtuales usar o cuanto tiempo ejecutar la prueba, sino que los definimos en estas opciones que k6 tendrá en cuenta para correr las pruebas, podemos definir varios escenarios pero para este caso definiremos solo uno que lo que haces es ejecutar un número fijo de iteraciones en un periodo de tiempo determinado, de igual modo haremos uso del json de usuarios generados en el seed para enviar solicitudes constantes a nuestra api, el archivo quedaría así:<!-- --></p><div class="code-title"><div>src/test.ts</div></div><div class="gatsby-highlight" data-language="typescript"><pre class="prism-code language-typescript" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="src/test.ts: copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">src/test.ts: copy code to clipboard</span></button><code class="language-typescript"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token keyword" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> http </span><span class="token keyword" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;k6/http&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3<!-- --></span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> users </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;../resultData.json&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5<!-- --></span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> options </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6<!-- --></span><span class="token plain">  scenarios</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7<!-- --></span><span class="token plain">    constant_request_rate</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8<!-- --></span><span class="token plain">      executor</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;constant-arrival-rate&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9<!-- --></span><span class="token plain">      rate</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">10<!-- --></span><span class="token plain">      timeUnit</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;1s&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">11<!-- --></span><span class="token plain">      duration</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;30s&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">12<!-- --></span><span class="token plain">      preAllocatedVUs</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">13<!-- --></span><span class="token plain">      maxVUs</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">14<!-- --></span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">15<!-- --></span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">16<!-- --></span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">17<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">18<!-- --></span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">setup</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">19<!-- --></span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">20<!-- --></span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">default</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">21<!-- --></span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> user </span><span class="token keyword" style="color:rgb(127, 219, 202)">of</span><span class="token plain"> users</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">22<!-- --></span><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">token</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">23<!-- --></span><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> url </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(173, 219, 103)">`</span><span class="token template-string string" style="color:rgb(173, 219, 103)">https://load-test-api-jp.herokuapp.com/users</span><span class="token template-string template-punctuation string" style="color:rgb(173, 219, 103)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">24<!-- --></span><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> params </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">25<!-- --></span><span class="token plain">        headers</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">26<!-- --></span><span class="token plain">          Authorization</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(173, 219, 103)">`</span><span class="token template-string string" style="color:rgb(173, 219, 103)">Bearer </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">user</span><span class="token template-string interpolation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token template-string interpolation">token</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string template-punctuation string" style="color:rgb(173, 219, 103)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">27<!-- --></span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">28<!-- --></span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">29<!-- --></span><span class="token plain">      http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> params</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">30<!-- --></span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">31<!-- --></span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">32<!-- --></span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></code></pre></div><p class="css-1ccrm8j">Ya en el package.json colocamos previamente el script de build y el de test, pero nos falta añadir en la línea 10 del webpack.config.js la instrucción para transpilar el archivo de test</p><blockquote class="css-1ioa6cd"><p class="css-1ccrm8j">test: &#x27;./src/test.ts&#x27;,</p></blockquote><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:632px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:26.666666666666668%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA+klEQVQY003Qy26EIBQG4HkN5OY4gBNR8DbtOKa1jQub2IUr3/9N/gYmZro4gUPgy+E/McagtYYxBpxzUErhvce+71h/V1S2gsscuOBgnCOhDJSxuIZijMc+vBVC4BQ2TdNEMODhMMsypDJF27ZYlgXD/YFUSlij8NE6DHWJ797js3No7RV3b6Eul4hGMEz0H5RSghACay22bcM0TREsc41l6DD1Hj9Dh3W8RSzAWqkXGCbJ8zyC4WvqrCCYiOA8zxjHEec0RWEUHnWJd/dEvnqPW1XgzRUwWr/Auq6fGYY8OEWlKjRFA5KQOGmSJPHykWEoQmmsI88jwz+9YpHE++AZqwAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="webpack config" title="webpack config" src="/static/2f102a326a5a1304df30437654d941d9/7818d/entry_webpack_files.png" srcSet="/static/2f102a326a5a1304df30437654d941d9/5243c/entry_webpack_files.png 240w,/static/2f102a326a5a1304df30437654d941d9/ab158/entry_webpack_files.png 480w,/static/2f102a326a5a1304df30437654d941d9/7818d/entry_webpack_files.png 632w" sizes="(max-width: 632px) 100vw, 632px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span><p class="css-1ccrm8j">Ahora podemos correr nuestra prueba con el comando</p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<!-- --><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-bash"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1<!-- --></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> run </span><span class="token builtin class-name" style="color:rgb(255, 203, 139)">test</span></div></code></pre></div><p class="css-1ccrm8j">Esto empezaría a ejecutar nuestro test</p><undefined><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:67.5%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABe0lEQVQ4y62T727bIBRHbTDYxLAYbMeJtsb51yXSGnedlgfI3v+dzoSXbvvS1lr34eheIXQuiB9JWP3Azk/k1qILg5SSJE1JkuRF0jR9kST4EucMudKYwmDM7FXZm/i2HiVSCUSWkGmByjOUzlBKjWSZ/DV9irB/uGPd9zxe9pwva+4+NzTbGr/0+CoQQo21jjzPpwmH88DhcM/l+4ntZoU1jjwRGCmxNsOYWBUqE9OE1+uVYRh4evrGYb9h37d87VvO65bttmKzqTidGpzV04TH45Hd7kC//8j+S8P9sWN3aNCF+LdHSbVGaI2efyBzjiQVf8XjD5OFyhiy2QxVWnRpkUq9Lzaf1mu094iieJ/omaqqCKsVvuuo2vZ3H7ol1W3NLzrCsqMKHmfdmE0hUmRESoQQI6OwaRoWiwWxPuNDzF8g1DVd1+F9YD431PX8lkvLzGjKUo19WZYYc7thG08VAvGkEeccRVGMmyJxmDFmXIs18savSfif/AS0sDA46i0KLgAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="resultado test" title="resultado test" src="/static/be8539600f085b9b117f0718af21cd3f/7d769/first_step_run_test.png" srcSet="/static/be8539600f085b9b117f0718af21cd3f/5243c/first_step_run_test.png 240w,/static/be8539600f085b9b117f0718af21cd3f/ab158/first_step_run_test.png 480w,/static/be8539600f085b9b117f0718af21cd3f/7d769/first_step_run_test.png 960w,/static/be8539600f085b9b117f0718af21cd3f/87339/first_step_run_test.png 1440w,/static/be8539600f085b9b117f0718af21cd3f/88b03/first_step_run_test.png 1920w,/static/be8539600f085b9b117f0718af21cd3f/0146c/first_step_run_test.png 2084w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <!-- --><span class="gatsby-resp-image-background-image" style="padding-bottom:43.333333333333336%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABaUlEQVQoz32S626jMBCFCQYSgU0cro0DlGsgKC+w7/9g38puI3W1bX8cWTNzfObqnc8pSZIgpeR0OrnX2nEcO3zYkigSxLFwsVc8iQVSnkikdLwoivD2fWeaZ6Z5YhxHpmliGAbmeWZeFu73O8uyUFUlWqekaYoQ4hMHAuEjREAQBPi+j5dlmVO2RhiGDjb4wots/ZZzOBzwPO9n2OxN07h2rSNSisTcCJT69eOPwuu68nw+ud1urg1bcX1fKZqGvO249j1xmlK3LbrtGJYFfb0ybhvhd0ntzJxg03A8HtFZRjnP6LIk6zqq7p0kzymMQVYVpm1RRUnT94TyG8Ft23k8dowxblZnrXl77FTDwMUYSmM4G0PdvaPqN/px4lzXjOtGKOX/guPQUBYapRTC91F5ju46VFW5ilReEMUJsVKE9oyU4qgUqdaIz7n/g+TyB3l5Eoa+c4gocvDtGdgt29uyxK9L+GXTfwFGw87HeH1uAgAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <!-- --><img class="gatsby-resp-image-image css-0" alt="resultado test" title="resultado test" src="/static/df46232c86b8d7f63207dd872ff09591/7d769/second_step_run_test.png" srcSet="/static/df46232c86b8d7f63207dd872ff09591/5243c/second_step_run_test.png 240w,/static/df46232c86b8d7f63207dd872ff09591/ab158/second_step_run_test.png 480w,/static/df46232c86b8d7f63207dd872ff09591/7d769/second_step_run_test.png 960w,/static/df46232c86b8d7f63207dd872ff09591/87339/second_step_run_test.png 1440w,/static/df46232c86b8d7f63207dd872ff09591/88b03/second_step_run_test.png 1920w,/static/df46232c86b8d7f63207dd872ff09591/e0c85/second_step_run_test.png 2024w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    <!-- --></span></undefined><blockquote class="css-1ioa6cd"><p class="css-1ccrm8j">El warning que aparece es porque mi maquina no soporta la cantidad de usuarios virtuales que definí xD</p></blockquote><p class="css-1ccrm8j">En los resultados podemos observar que en total hizo 6308 request, 105 request por segundo aproximadamente y cero por ciento de porcentaje de error.</p><p class="css-1ccrm8j">En conclusión y desde mi punto de vista k6 es una forma rápida de ejecutar pruebas de carga, bastante sencilla ya que utiliza javascript para definir las pruebas y escenarios, con las extensiones también nos da la posibilidad y el paquete postman-to-k6 nos permite definir y ejecutar una prueba aún mas rápido en caso de estar familiarizado con postman.</p><p class="css-1ccrm8j">Y bueno, espero haber sido lo bastante claro y explicativo durante el post y que se haya entendido todo, cualquier duda o sugerencia no dudes en contactarme, estoy en las redes como @JoralmoPro.</p><blockquote class="css-1ioa6cd"><p class="css-1ccrm8j">Nos vemos en línea.</p></blockquote></section></main><style data-emotion="css y7pay1">.css-y7pay1{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:8rem;color:var(--theme-ui-colors-secondary);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;border-top-style:solid;border-top-width:1px;border-top-color:var(--theme-ui-colors-divide);padding-top:1rem;}.css-y7pay1 a{color:var(--theme-ui-colors-secondary);-webkit-text-decoration:none;text-decoration:none;}.css-y7pay1 a:hover{color:var(--theme-ui-colors-heading);-webkit-text-decoration:underline;text-decoration:underline;}.css-y7pay1 a:focus{color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-y7pay1{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}@media screen and (min-width: 768px){.css-y7pay1{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><footer class="css-y7pay1"><div>© <!-- -->2022<!-- --> by <!-- -->JoralmoPro<!-- -->. All rights reserved.<!-- --></div><div><a aria-label="Link to the theme&#x27;s GitHub repository" href="https://github.com/LekoArts/gatsby-themes/tree/main/themes/gatsby-theme-minimal-blog" class="css-1fmmdck">Theme</a> <!-- -->by<!-- --> <!-- --><a aria-label="Link to the theme author&#x27;s website" href="https://www.lekoarts.de?utm_source=minimal-blog&amp;utm_medium=Theme" class="css-1fmmdck">LekoArts</a></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/load-test-with-grafana-k6";window.___webpackCompilationHash="ee5964e2fef85f2c3b9a";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-167ad3a296625905496f.js"],"app":["/app-199435f9c811f20e30eb.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-blog-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-blog-query-tsx-28aec58e9efe628e752b.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-homepage-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-homepage-query-tsx-635e99a00a125623cf43.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx-98c6b26ca627a896782b.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-d5f544e16f00e92465c8.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tag-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tag-query-tsx-5c883d73e74623f891c5.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tags-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tags-query-tsx-c12681b9aa508b80c78c.js"],"component---src-pages-404-jsx":["/component---src-pages-404-jsx-5ca64c4fee0f20e2181b.js"]};/*]]>*/</script><script src="/polyfill-167ad3a296625905496f.js" nomodule=""></script><script src="/app-199435f9c811f20e30eb.js" async=""></script><script src="/framework-ad7b141bba4afc6d1dfe.js" async=""></script><script src="/webpack-runtime-58958642f4ba800c17d7.js" async=""></script></body></html>