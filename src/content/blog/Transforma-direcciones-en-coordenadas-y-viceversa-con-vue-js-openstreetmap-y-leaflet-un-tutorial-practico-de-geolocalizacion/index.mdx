---
title: "Transforma Direcciones en Coordenadas y Viceversa con Vue.js, OpenStreetMap y Leaflet: 隆Un Tutorial Pr谩ctico de Geolocalizaci贸n! (APIS GRATUITAS)"
date: 2024-06-19 12:00:00
description: "En este tutorial conoceremos una api gratuita de geolocalizaci贸n y una de mapas, adem谩s aprender谩s a transformar direcciones en coordenadas y viceversa con Vue.js, OpenStreetMap y Leaflet. 隆Un tutorial pr谩ctico de geolocalizaci贸n!"
banner: ./banner.png
tags:
- vuejs
- geolocalizaci贸n
- tutorial
- programaci贸n
slug: "/transforma-direcciones-en-coordenadas-y-viceversa-con-vue-js-openstreetmap-y-leaflet-un-tutorial-practico-de-geolocalizacion"
canonicalUrl: https://blog.joralmo.pro/transforma-direcciones-en-coordenadas-y-viceversa-con-vue-js-openstreetmap-y-leaflet-un-tutorial-practico-de-geolocalizacion
---

import VideoPlayer from './../videoPlayer.js';

#### Hola, 驴qu茅 tal? 

En este tutorial, como bien dice en el titulo, veremos como transformar direcciones en coordenadas y viceversa usando una API gratuita que nos provee OpenStreetMap, por otro lado esto lo integraremos con otra capa de mapas, que tambi茅n es gratuito y muy popular, Leaflet.

En esta ocasi贸n usar茅 Vue.js, pero tengamos en cuenta que esto es aplicable a cualquier framework o librer铆a de JavaScript.

隆Vamos a ello! 

Si quieres seguir este tutorial, necesitar谩s:

- Conocimientos b谩sicos de Javascript
- Node.js instalado en tu computadora
- Vue.js instalado en tu computadora

## Paso 1: Crear un nuevo proyecto de Vue.js

Para comenzar, crearemos un nuevo proyecto de Vue.js. Para ello, ejecutamos el siguiente comando en nuestra terminal:

```bash
npm install -g @vue/cli
vue create geolocalizacion-leaflet #(En este paso el proyecto por defecto de vue3 y usando npm)
cd geolocalizacion-leaflet
```

## Paso 2: Instalar Leaflet y Axios

Axios nos ayudar谩 a realizar peticiones a la API de OpenStreetMap, mientras que Leaflet nos ayudar谩 a mostrar el mapa en nuestra aplicaci贸n. Instalamos ambas dependencias con el siguiente comando:

```bash
npm install axios leaflet vue3-leaflet
```

#### Solo para asegurarnos que hasta ahora todo va bien, dentro de la carpeta de nuestro proyecto ejecutamos el siguiente comando:

```bash
npm run serve
```
Si todo va bien, deber铆amos ver algo as铆 en nuestra terminal:

[![npm run serve](./resultadoConsola.png)](./resultadoConsola.png)

Y al ingresar a `http://localhost:8080/` deber铆amos ver algo como esto:

[![Resultado en el navegador](./resultadoNavegador.png)](./resultadoNavegador.png)

## Paso 3: Crear un componente de mapa

Dentro de la carpeta `src/components` creamos un nuevo archivo llamado `Map.vue` y agregamos el siguiente c贸digo:

```vue:title=Map.vue
<template>
  <div>
    <l-map ref="map" :zoom="zoom" :center="center">
      <l-tile-layer :url="url" />
      <l-marker :lat-lng="center"></l-marker>
    </l-map>
  </div>
</template>

<script>
import { LMap, LTileLayer, LMarker } from "vue3-leaflet";
import "leaflet/dist/leaflet.css";

export default {
  name: "MapComponent",
  components: {
    LMap,
    LTileLayer,
    LMarker
  },
  props: {
    center: {
      type: Array,
      required: true
    },
    zoom: {
      type: Number
    },
  },
  data() {
    return {
      url: "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
    };
  },
  methods: {
    recenterMap() {
      setTimeout(() => {
        this.$refs.map.setZoom(this.zoom);
        this.$refs.map.setView(this.center);
      }, 100);
    }
  }
};
</script>

<style>
  div[center] {
    height: 80vh;
  }
  div#map {
    height: 80vh !important;
  }
</style>
```

Este componente utiliza `vue3-leaflet` para mostrar un mapa de OpenStreetMap, con un marcador en el centro del mapa. A continuaci贸n, explicamos cada parte del componente:

la parte
```html
<template>
  <div>
    <l-map ref="map" :zoom="zoom" :center="center">
      <l-tile-layer :url="url" />
      <l-marker :lat-lng="center"></l-marker>
    </l-map>
  </div>
</template>
```
1. `<l-map>`: Este componente es el contenedor principal del mapa. Se le pasan dos propiedades: `zoom` y `center` y adicionalmente tiene un ref para poder acceder a 茅l desde el c贸digo.
- `zoom`: Es el nivel de zoom del mapa
- `center`: Es el centro del mapa, en este caso, la posici贸n del marcador
- `ref`: Referencia al mapa para poder acceder a 茅l desde el c贸digo

2. `<l-tile-layer>`: Este componente a帽ade las capas de mosaicos (tiles) al mapa, utilizando una URL espec铆fica para obtener las im谩genes. En este caso, estamos utilizando los mosaicos de OpenStreetMap.

3. `<l-marker>`: Este componente coloca un marcador en el mapa en las coordenadas especificadas por `lat-lng`.

la parte
```javascript
<script>
import { LMap, LTileLayer, LMarker } from "vue3-leaflet";
import "leaflet/dist/leaflet.css";

export default {
  name: "MapComponent",
  components: {
    LMap,
    LTileLayer,
    LMarker
  },
  props: {
    center: {
      type: Array,
      required: true
    },
    zoom: {
      type: Number
    },
  },
  data() {
    return {
      url: "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
    };
  },
  methods: {
    recenterMap() {
      setTimeout(() => {
        this.$refs.map.setZoom(this.zoom);
        this.$refs.map.setView(this.center);
      }, 100);
    }
  }
};
</script>
```

1. Importaciones
- `LMap`, `LTileLayer` y `LMarker`: Componentes de `vue3-leaflet` que necesitamos para mostrar el mapa y el marcador
- `leaflet/dist/leaflet.css`: Estilos de Leaflet para que el mapa se vea correctamente

2. `name`: Nombre del componente
3. `components`: Componentes que estamos utilizando en este componente
4. `props`: Propiedades que recibe el componente `center` y `zoom`
  - `center`: Coordenadas del centro del mapa
  - `zoom`: Nivel de zoom del mapa
5. `data`: Datos del componente
  - `url`: URL de los mosaicos de OpenStreetMap
6. `methods`: M茅todos del componente
  - `recenterMap`: M茅todo para centrar el mapa en las coordenadas especificadas por `center`, se utiliza un `setTimeout` para asegurarse de que el mapa se haya renderizado antes de centrarlo

Por ultimo el bloque de estilos es para darle altura al mapa, en este caso le damos una altura de 80vh.

## Paso 4: Crear un servicio de Geolocalizaci贸n

Dentro de la carpeta `src` creamos una nueva carpeta llamada `services` y dentro de ella un archivo llamado `geolocation.js`, en este archivo agregamos el siguiente c贸digo:

```javascript:title=src/services/geolocation.js
import axios from 'axios';

const GEOCODE_API_URL = 'https://nominatim.openstreetmap.org/search';
const REVERSE_GEOCODE_API_URL = 'https://nominatim.openstreetmap.org/reverse';

export const geocode = (address) => {
  return axios.get(GEOCODE_API_URL, {
    params: {
      q: address,
      format: 'json'
    }
  });
};

export const reverseGeocode = (lat, lon) => {
  return axios.get(REVERSE_GEOCODE_API_URL, {
    params: {
      lat,
      lon,
      format: 'json'
    }
  });
};
```

Este servicio contiene dos funciones principales:

1. `geocode`: Esta funci贸n recibe una direcci贸n y realiza una petici贸n a la API de OpenStreetMap para obtener las coordenadas correspondientes a esa direcci贸n.
2. `reverseGeocode`: Esta funci贸n recibe una latitud y longitud y realiza una petici贸n a la API de OpenStreetMap para obtener la direcci贸n correspondiente a esas coordenadas.

## Paso 5: Integrar el servicio de Geolocalizaci贸n en el componente de mapa

Vamos a usar el archivo App.vue para integrar el componente de mapa y el servicio de geolocalizaci贸n. Borramos todo el contenido de`src/App.vue` y agregamos el siguiente c贸digo:

```vue:title=App.vue
<template>
  <div id="app">
    <div class="input-container">
      <input v-model="address" placeholder="Enter an address" />
      <button @click="getCoordinates">Get Coordinates</button>
    </div>
    <div class="info">
      <p>Latitud: {{ coordinates.lat }}</p>
      <p>Longitud: {{ coordinates.lon }}</p>
      <p>
        Nombre de la direcci贸n:
        {{ reverseResponse.display_name || "Busca una direcci贸n" }}
      </p>
    </div>
    <MapComponent
      ref="mapComponent"
      :center="[coordinates.lat, coordinates.lon]"
      :zoom="zoom"
    />
  </div>
</template>

<script>
import { geocode, reverseGeocode } from "./services/geolocation";
import MapComponent from "./components/Map.vue";

export default {
  name: "App",
  components: {
    MapComponent,
  },
  data() {
    return {
      address: "",
      coordinates: {
        lat: 4.570868,
        lon: -74.297333,
      },
      zoom: 15,
      reverseResponse: {},
    };
  },
  methods: {
    async getCoordinates() {
      try {
        const response = await geocode(this.address);
        if (response.data && response.data.length > 0) {
          this.coordinates = {
            lat: parseFloat(response.data[0].lat),
            lon: parseFloat(response.data[0].lon),
          };
          this.$refs.mapComponent.recenterMap();
          const reverseResponse = await reverseGeocode(
            this.coordinates.lat,
            this.coordinates.lon
          );
          this.reverseResponse = reverseResponse.data;
        }
      } catch (error) {
        console.error("Error fetching coordinates:", error);
      }
    },
  },
};
</script>

<style>
#app {
  font-family: Arial, sans-serif;
  margin: 0 auto;
  padding: 20px;
}

.input-container {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
}

input {
  flex: 1;
  padding: 10px;
  font-size: 16px;
  border: 1px solid #8501B0;
  border-radius: 4px;
}

button {
  padding: 10px 20px;
  font-size: 16px;
  color: #fff;
  background-color: #8501B0;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button:hover {
  background-color: #6a0186;
}

.info {
  margin-bottom: 20px;
}

.info p {
  margin: 5px 0;
  font-size: 16px;
}

l-map {
  border: 1px solid #8501B0;
  border-radius: 4px;
}
</style>
```

Este archivo contiene lo siguiente:

1. Un campo de entrada para ingresar una direcci贸n y un bot贸n para obtener las coordenadas correspondientes a esa direcci贸n.
2. El componente `MapComponent` que recibe las coordenadas y el nivel de zoom del mapa.
3. Un objeto `coordinates` que contiene las coordenadas de la direcci贸n ingresada por el usuario (por defecto, Bogot谩, Colombia) y que es la respuesta de la API de OpenStreetMap al realizar una petici贸n de geolocalizaci贸n.
4. Un objeto `reverseResponse` que contiene la respuesta de la API de OpenStreetMap al realizar una petici贸n de geolocalizaci贸n inversa, usamos las coordenadas de la respuesta de la petici贸n de geolocalizaci贸n para obtener la direcci贸n correspondiente.
5. El m茅todo `getCoordinates` que se encarga de llamar al servicio de geolocalizaci贸n para obtener las coordenadas de la direcci贸n ingresada por el usuario y de llamar al servicio de geolocalizaci贸n inversa para obtener la direcci贸n correspondiente a esas coordenadas.
6. Estilos para darle un aspecto visual a la aplicaci贸n.

## Paso 6: Ejecutar la aplicaci贸n

Para ejecutar la aplicaci贸n, ejecutamos el siguiente comando en nuestra terminal:

```bash
npm run serve
```

Si todo va bien, al ingresar a `http://localhost:8080/` deber铆amos ver algo as铆:

<VideoPlayer src="https://joralmo.pro/resultadoFinal.mp4" />

隆Y listo! Hemos creado una aplicaci贸n de geolocalizaci贸n que transforma direcciones en coordenadas y viceversa utilizando Vue.js, OpenStreetMap y Leaflet.

Podemos ver que realmente no es complejo de implementar, tiene tiempos de respuesta muy r谩pidos y, adem谩s, 隆es gratuito!

Espero que este tutorial te haya sido de utilidad, y que puedas aplicar estos conocimientos en tus proyectos.

<a href="https://github.com/Joralmo/geolocalization-tutorial-vue" target="_blank">Repositorio del proyecto en GitHub</a>

> Nos vemos en l铆nea